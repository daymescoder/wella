!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).VtexDiagnostics={})}(this,(function(t){"use strict";function e(t){try{return JSON.stringify(t)}catch(t){return'"[Circular]"'}}var r=function(t,r,n){var o=n&&n.stringify||e;if("object"==typeof t&&null!==t){var i=r.length+1;if(1===i)return t;var a=new Array(i);a[0]=o(t);for(var s=1;s<i;s++)a[s]=o(r[s]);return a.join(" ")}if("string"!=typeof t)return t;var u=r.length;if(0===u)return t;for(var c="",l=0,f=-1,p=t&&t.length||0,h=0;h<p;){if(37===t.charCodeAt(h)&&h+1<p){switch(f=f>-1?f:0,t.charCodeAt(h+1)){case 100:case 102:if(l>=u)break;if(null==r[l])break;f<h&&(c+=t.slice(f,h)),c+=Number(r[l]),f=h+2,h++;break;case 105:if(l>=u)break;if(null==r[l])break;f<h&&(c+=t.slice(f,h)),c+=Math.floor(Number(r[l])),f=h+2,h++;break;case 79:case 111:case 106:if(l>=u)break;if(void 0===r[l])break;f<h&&(c+=t.slice(f,h));var d=typeof r[l];if("string"===d){c+="'"+r[l]+"'",f=h+2,h++;break}if("function"===d){c+=r[l].name||"<anonymous>",f=h+2,h++;break}c+=o(r[l]),f=h+2,h++;break;case 115:if(l>=u)break;f<h&&(c+=t.slice(f,h)),c+=String(r[l]),f=h+2,h++;break;case 37:f<h&&(c+=t.slice(f,h)),c+="%",f=h+2,h++,l--}++l}++h}if(-1===f)return t;f<p&&(c+=t.slice(f));return c};var n=a;const o=function(){function t(t){return void 0!==t&&t}try{return"undefined"!=typeof globalThis||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch(e){return t(self)||t(window)||t(this)||{}}}().console||{},i={mapHttpRequest:d,mapHttpResponse:d,wrapRequestSerializer:y,wrapResponseSerializer:y,wrapErrorSerializer:y,req:d,res:d,err:function(t){const e={type:t.constructor.name,msg:t.message,stack:t.stack};for(const r in t)void 0===e[r]&&(e[r]=t[r]);return e}};function a(t){(t=t||{}).browser=t.browser||{};const e=t.browser.transmit;if(e&&"function"!=typeof e.send)throw Error("pino: transmit option must have a send function");const r=t.browser.write||o;t.browser.write&&(t.browser.asObject=!0);const n=t.serializers||{},i=function(t,e){if(Array.isArray(t))return t.filter((function(t){return"!stdSerializers.err"!==t}));return!0===t&&Object.keys(e)}(t.browser.serialize,n);let u=t.browser.serialize;Array.isArray(t.browser.serialize)&&t.browser.serialize.indexOf("!stdSerializers.err")>-1&&(u=!1);"function"==typeof r&&(r.error=r.fatal=r.warn=r.info=r.debug=r.trace=r),(!1===t.enabled||t.browser.disabled)&&(t.level="silent");const f=t.level||"info",d=Object.create(r);d.log||(d.log=v),Object.defineProperty(d,"levelVal",{get:function(){return"silent"===this.level?1/0:this.levels.values[this.level]}}),Object.defineProperty(d,"level",{get:function(){return this._level},set:function(t){if("silent"!==t&&!this.levels.values[t])throw Error("unknown level "+t);this._level=t,s(y,d,"error","log"),s(y,d,"fatal","error"),s(y,d,"warn","error"),s(y,d,"info","log"),s(y,d,"debug","log"),s(y,d,"trace","log")}});const y={transmit:e,serialize:i,asObject:t.browser.asObject,levels:["error","fatal","warn","info","debug","trace"],timestamp:h(t)};return d.levels=a.levels,d.level=f,d.setMaxListeners=d.getMaxListeners=d.emit=d.addListener=d.on=d.prependListener=d.once=d.prependOnceListener=d.removeListener=d.removeAllListeners=d.listeners=d.listenerCount=d.eventNames=d.write=d.flush=v,d.serializers=n,d._serialize=i,d._stdErrSerialize=u,d.child=function(r,o){if(!r)throw new Error("missing bindings for child Pino");o=o||{},i&&r.serializers&&(o.serializers=r.serializers);const a=o.serializers;if(i&&a){var s=Object.assign({},n,a),u=!0===t.browser.serialize?Object.keys(s):i;delete r.serializers,c([r],u,s,this._stdErrSerialize)}function f(t){this._childLevel=1+(0|t._childLevel),this.error=l(t,r,"error"),this.fatal=l(t,r,"fatal"),this.warn=l(t,r,"warn"),this.info=l(t,r,"info"),this.debug=l(t,r,"debug"),this.trace=l(t,r,"trace"),s&&(this.serializers=s,this._serialize=u),e&&(this._logEvent=p([].concat(t._logEvent.bindings,r)))}return f.prototype=this,new f(this)},e&&(d._logEvent=p()),d}function s(t,e,r,n){const i=Object.getPrototypeOf(e);e[r]=e.levelVal>e.levels.values[r]?v:i[r]?i[r]:o[r]||o[n]||v,function(t,e,r){if(!t.transmit&&e[r]===v)return;e[r]=(n=e[r],function(){const i=t.timestamp(),s=new Array(arguments.length),l=Object.getPrototypeOf&&Object.getPrototypeOf(this)===o?o:this;for(var p=0;p<s.length;p++)s[p]=arguments[p];if(t.serialize&&!t.asObject&&c(s,this._serialize,this.serializers,this._stdErrSerialize),t.asObject?n.call(l,u(this,r,s,i)):n.apply(l,s),t.transmit){const n=t.transmit.level||e.level,o=a.levels.values[n],u=a.levels.values[r];if(u<o)return;f(this,{ts:i,methodLevel:r,methodValue:u,transmitLevel:n,transmitValue:a.levels.values[t.transmit.level||e.level],send:t.transmit.send,val:e.levelVal},s)}});var n}(t,e,r)}function u(t,e,n,o){t._serialize&&c(n,t._serialize,t.serializers,t._stdErrSerialize);const i=n.slice();let s=i[0];const u={};o&&(u.time=o),u.level=a.levels.values[e];let l=1+(0|t._childLevel);if(l<1&&(l=1),null!==s&&"object"==typeof s){for(;l--&&"object"==typeof i[0];)Object.assign(u,i.shift());s=i.length?r(i.shift(),i):void 0}else"string"==typeof s&&(s=r(i.shift(),i));return void 0!==s&&(u.msg=s),u}function c(t,e,r,n){for(const o in t)if(n&&t[o]instanceof Error)t[o]=a.stdSerializers.err(t[o]);else if("object"==typeof t[o]&&!Array.isArray(t[o]))for(const n in t[o])e&&e.indexOf(n)>-1&&n in r&&(t[o][n]=r[n](t[o][n]))}function l(t,e,r){return function(){const n=new Array(1+arguments.length);n[0]=e;for(var o=1;o<n.length;o++)n[o]=arguments[o-1];return t[r].apply(this,n)}}function f(t,e,r){const n=e.send,o=e.ts,i=e.methodLevel,a=e.methodValue,s=e.val,u=t._logEvent.bindings;c(r,t._serialize||Object.keys(t.serializers),t.serializers,void 0===t._stdErrSerialize||t._stdErrSerialize),t._logEvent.ts=o,t._logEvent.messages=r.filter((function(t){return-1===u.indexOf(t)})),t._logEvent.level.label=i,t._logEvent.level.value=a,n(i,t._logEvent,s),t._logEvent=p(u)}function p(t){return{ts:0,messages:[],bindings:t||[],level:{label:"",value:0}}}function h(t){return"function"==typeof t.timestamp?t.timestamp:!1===t.timestamp?m:_}function d(){return{}}function y(t){return t}function v(){}function m(){return!1}function _(){return Date.now()}a.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},a.stdSerializers=i,a.stdTimeFunctions=Object.assign({},{nullTime:m,epochTime:_,unixTime:function(){return Math.round(Date.now()/1e3)},isoTime:function(){return new Date(Date.now()).toISOString()}});const g=t=>"[object Object]"===(t=>Object.prototype.toString.call(t))(t),b={10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"},E=t=>g(t)&&"number"==typeof t.time&&"number"==typeof t.level&&("string"==typeof t.hostname||void 0===t.hostname)&&t.level in b,w=t=>t.workflowType?t.msg?`[${t.workflowType}] ${t.msg}`:`[${t.workflowType}]`:t.msg??"",T=["level","time","msg","account","workflowType"],O=(t,e,r=T)=>{if(E(t)){const a=[],s=e??(t=>{const e=b[t.level];return"fatal"===e?"error":e})(t);a.push(`[${new Date(t.time).toISOString()}]: ${w(t)}`);const u=(o=r,i=t,Object.keys(i).reduce(((t,e)=>(o.includes(e)||(t[e]=i[e]),t)),{}));n=u,0!==Object.keys(n).length&&a.push(u),console[s](...a)}else console.error(t);var n,o,i};var S=L;L.default=L,L.stable=U,L.stableStringify=U;var A="[...]",R="[Circular]",P=[],x=[];function M(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function L(t,e,r,n){var o;void 0===n&&(n=M()),N(t,"",0,[],void 0,0,n);try{o=0===x.length?JSON.stringify(t,e,r):JSON.stringify(t,D(e),r)}catch(t){return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;0!==P.length;){var i=P.pop();4===i.length?Object.defineProperty(i[0],i[1],i[3]):i[0][i[1]]=i[2]}}return o}function C(t,e,r,n){var o=Object.getOwnPropertyDescriptor(n,r);void 0!==o.get?o.configurable?(Object.defineProperty(n,r,{value:t}),P.push([n,r,e,o])):x.push([e,r,t]):(n[r]=t,P.push([n,r,e]))}function N(t,e,r,n,o,i,a){var s;if(i+=1,"object"==typeof t&&null!==t){for(s=0;s<n.length;s++)if(n[s]===t)return void C(R,t,e,o);if(void 0!==a.depthLimit&&i>a.depthLimit)return void C(A,t,e,o);if(void 0!==a.edgesLimit&&r+1>a.edgesLimit)return void C(A,t,e,o);if(n.push(t),Array.isArray(t))for(s=0;s<t.length;s++)N(t[s],s,s,n,t,i,a);else{var u=Object.keys(t);for(s=0;s<u.length;s++){var c=u[s];N(t[c],c,s,n,t,i,a)}}n.pop()}}function I(t,e){return t<e?-1:t>e?1:0}function U(t,e,r,n){void 0===n&&(n=M());var o,i=k(t,"",0,[],void 0,0,n)||t;try{o=0===x.length?JSON.stringify(i,e,r):JSON.stringify(i,D(e),r)}catch(t){return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;0!==P.length;){var a=P.pop();4===a.length?Object.defineProperty(a[0],a[1],a[3]):a[0][a[1]]=a[2]}}return o}function k(t,e,r,n,o,i,a){var s;if(i+=1,"object"==typeof t&&null!==t){for(s=0;s<n.length;s++)if(n[s]===t)return void C(R,t,e,o);try{if("function"==typeof t.toJSON)return}catch(t){return}if(void 0!==a.depthLimit&&i>a.depthLimit)return void C(A,t,e,o);if(void 0!==a.edgesLimit&&r+1>a.edgesLimit)return void C(A,t,e,o);if(n.push(t),Array.isArray(t))for(s=0;s<t.length;s++)k(t[s],s,s,n,t,i,a);else{var u={},c=Object.keys(t).sort(I);for(s=0;s<c.length;s++){var l=c[s];k(t[l],l,s,n,t,i,a),u[l]=t[l]}if(void 0===o)return u;P.push([o,e,t]),o[e]=u}n.pop()}}function D(t){return t=void 0!==t?t:function(t,e){return e},function(e,r){if(x.length>0)for(var n=0;n<x.length;n++){var o=x[n];if(o[1]===e&&o[0]===r){r=o[2],x.splice(n,1);break}}return t.call(this,e,r)}}let j;!function(t){t[t.Emergency=0]="Emergency",t[t.Alert=1]="Alert",t[t.Critical=2]="Critical",t[t.Error=3]="Error",t[t.Warning=4]="Warning",t[t.Notice=5]="Notice",t[t.Info=6]="Info",t[t.Debug=7]="Debug"}(j||(j={}));const B={debug:j.Debug,info:j.Info,warning:j.Warning,error:j.Error,fatal:j.Emergency};let V;!function(t){t[t.Kernel=0]="Kernel",t[t.User=1]="User",t[t.System=3]="System",t[t.Audit=13]="Audit",t[t.Alert=14]="Alert",t[t.Local0=16]="Local0",t[t.Local1=17]="Local1",t[t.Local2=18]="Local2",t[t.Local3=19]="Local3",t[t.Local4=20]="Local4",t[t.Local5=21]="Local5",t[t.Local6=22]="Local6",t[t.Local7=23]="Local7"}(V||(V={}));const F={create:({facility:t=V.Local0,appName:e="-"}={})=>({format:({timestamp:r,...n})=>{const o=(i=n.level,B[i]);var i;const a=8*t+o,{hostname:s="-",pid:u="-"}=n.extra_fields??{};return`${`<${a}>1 ${r} ${s} ${e} ${u} - - `}${S(n)}`}})};var G=function(){return G=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},G.apply(this,arguments)};function H(t){return t.toLowerCase()}var X=[/([a-z0-9])([A-Z])/g,/([A-Z])([A-Z][a-z])/g],z=/[^A-Z0-9]+/gi;function $(t,e,r){return e instanceof RegExp?t.replace(e,r):e.reduce((function(t,e){return t.replace(e,r)}),t)}function W(t,e){return void 0===e&&(e={}),function(t,e){void 0===e&&(e={});for(var r=e.splitRegexp,n=void 0===r?X:r,o=e.stripRegexp,i=void 0===o?z:o,a=e.transform,s=void 0===a?H:a,u=e.delimiter,c=void 0===u?" ":u,l=$($(t,n,"$1\0$2"),i,"\0"),f=0,p=l.length;"\0"===l.charAt(f);)f++;for(;"\0"===l.charAt(p-1);)p--;return l.slice(f,p).split("\0").map(s).join(c)}(t,G({delimiter:"."},e))}const K=t=>{const e={},r=new Map,n=(t,o=[])=>{var i,a;if(["number","string","boolean"].includes(typeof t)&&(e[o.join(".")]=t.toString()),null===t&&(e[o.join(".")]="null"),g(t)){var s;if(r.has(t))return void(e[o.join(".")]=`[Ref ${null===(s=r.get(t))||void 0===s?void 0:s.join(".")}]`);r.set(t,["#",...o]);for(const[e,r]of Object.entries(t))n(r,[...o,(i=e,a=void 0,void 0===a&&(a={}),W(i,G({delimiter:"_"},a)))])}if(Array.isArray(t)){var u;if(r.has(t))return void(e[o.join(".")]=`[Ref ${null===(u=r.get(t))||void 0===u?void 0:u.join(".")}]`);r.set(t,["#",...o]),t.forEach(((t,e)=>{n(t,[...o,e.toString()])}))}};return n(t),e},q=t=>{const e=t=>t.toString().padStart(2,"0");return`${t.getUTCFullYear()}-${e(t.getUTCMonth()+1)}-${e(t.getUTCDate())}T${e(t.getUTCHours())}:${e(t.getUTCMinutes())}:${e(t.getUTCSeconds())}Z`},J={10:"debug",20:"debug",30:"info",40:"warning",50:"error",60:"fatal"},Z=t=>{const{level:e,searchIndex:r,account:n,workflowType:o,workflowInstance:i,msg:a,err:s,error:u=s,time:c,...l}=t,f=g(p=u)&&"string"==typeof p.type&&"string"==typeof p.message&&"string"==typeof p.stack;var p;return{type:"log",level:J[e]??"debug",vtex:{search_index:String(r),account:String(n??"-"),workflow_type:String(o??"-"),workflow_instance:String(i??"-"),...f?{exception:{type:u.type,message:u.message},stack_trace:{data:u.stack}}:{}},timestamp:q(new Date(c)),message:a??"-",extra_fields:K(l)}};class Y{constructor(t){this.interval=t}next(){return Q(this.interval)}}const Q=t=>({duration:t,next(){return this}}),tt={generator:(t,e)=>{const[r,n]=t||[0,0],o=r+Math.random(),i=Math.pow(e.exponent,o)*Math.tanh(Math.sqrt(4*o)),a=Math.max(0,i-n);return[Math.min(.7142857142857143*a*e.initialDelay,e.maxDelay),[r+1,i]]},maxDelay:3e4,exponent:2,initialDelay:128};class et{constructor(t){this.options=t?{...tt,...t}:tt}next(){return rt(this.options).next(void 0)}}const rt=(t,e,r=0,n=-1)=>({duration:r,next(){const[r,o]=t.generator(e,t);return rt(t,o,r,n+1)}});class nt extends Error{constructor(t="Operation cancelled"){super(t),this.message=t,this.isTaskCancelledError=!0}}const ot={dispose:()=>{}};var it;!function(t){t.once=(t,e)=>{let r,n=!1;return r=t((t=>{e(t),r?r.dispose():n=!0})),n?(r.dispose(),ot):r},t.toPromise=(e,r)=>r?r.aborted?Promise.reject(new nt):new Promise(((n,o)=>{const i=at(r)((()=>{a.dispose(),o(new nt)})),a=t.once(e,(t=>{i.dispose(),n(t)}))})):new Promise((r=>t.once(e,r)))}(it||(it={}));const at=t=>{const e=new ut;if(t.aborted)return e.emit(),e.addListener;const r=()=>{e.emit(),t.removeEventListener("abort",r)};return t.addEventListener("abort",r),e.addListener};class st{constructor(){this.addListener=t=>this.addListenerInner(t)}get size(){return this.listeners?"function"==typeof this.listeners?1:this.listeners.length:0}emit(t){if(this.listeners)if("function"==typeof this.listeners)this.listeners(t);else for(const e of this.listeners)e(t);else;}addListenerInner(t){return this.listeners?"function"==typeof this.listeners?this.listeners=[this.listeners,t]:this.listeners.push(t):this.listeners=t,{dispose:()=>this.removeListener(t)}}removeListener(t){if(!this.listeners)return;if("function"==typeof this.listeners)return void(this.listeners===t&&(this.listeners=void 0));const e=this.listeners.indexOf(t);-1!==e&&(2===this.listeners.length?this.listeners=0===e?this.listeners[1]:this.listeners[0]:this.listeners=this.listeners.slice(0,e).concat(this.listeners.slice(e+1)))}}class ut extends st{constructor(){super(...arguments),this.addListener=t=>this.lastValue?(t(this.lastValue.value),ot):this.addListenerInner(t)}emit(t){this.lastValue={value:t},super.emit(t),this.listeners=void 0}}const ct=(new AbortController).signal,lt=new AbortController;lt.abort(),lt.signal;class ft{constructor(t=(()=>!1),e=(()=>!1)){this.errorFilter=t,this.resultFilter=e,this.successEmitter=new st,this.failureEmitter=new st,this.onSuccess=this.successEmitter.addListener,this.onFailure=this.failureEmitter.addListener}clone(){return new ft(this.errorFilter,this.resultFilter)}async invoke(t,...e){const r=this.successEmitter.size||this.failureEmitter.size?(()=>{if("undefined"!=typeof performance){const t=performance.now();return()=>performance.now()-t}{const t=process.hrtime.bigint();return()=>Number(process.hrtime.bigint()-t)/1e6}})():null;try{const n=await t(...e);return this.resultFilter(n)?(r&&this.failureEmitter.emit({duration:r(),handled:!0,reason:{value:n}}),{value:n}):(r&&this.successEmitter.emit({duration:r()}),{success:n})}catch(t){const e=t,n=this.errorFilter(e);if(r&&this.failureEmitter.emit({duration:r(),handled:n,reason:{error:e}}),!n)throw e;return{error:e}}}}const pt=(t,e)=>new Promise((r=>{const n=setTimeout(r,t);e&&n.unref()}));class ht{constructor(t,e){this.options=t,this.executor=e,this.onGiveUpEmitter=new st,this.onRetryEmitter=new st,this.onSuccess=this.executor.onSuccess,this.onFailure=this.executor.onFailure,this.onRetry=this.onRetryEmitter.addListener,this.onGiveUp=this.onGiveUpEmitter.addListener}dangerouslyUnref(){return new ht({...this.options,unref:!0},this.executor.clone())}async execute(t,e=ct){const r=this.options.backoff||new Y(0);let n;for(let o=0;;o++){const i=await this.executor.invoke(t,{attempt:o,signal:e});if("success"in i)return i.success;if(e.aborted||!(o<this.options.maxAttempts)){if(this.onGiveUpEmitter.emit(i),"error"in i)throw i.error;return i.value}{const t={attempt:o+1,signal:e,result:i};n=n?n.next(t):r.next(t);const a=n.duration,s=pt(a,!!this.options.unref);this.onRetryEmitter.emit({...i,delay:a}),await s}}}}const dt=(t,e)=>e?r=>r instanceof t&&e(r):e=>e instanceof t;class yt{constructor(t){this.options=t}orType(t,e){const r=dt(t,e);return new yt({...this.options,errorFilter:t=>this.options.errorFilter(t)||r(t)})}orWhen(t){return new yt({...this.options,errorFilter:e=>this.options.errorFilter(e)||t(e)})}orWhenResult(t){return new yt({...this.options,resultFilter:e=>this.options.resultFilter(e)||t(e)})}orResultType(t,e){const r=dt(t,e);return new yt({...this.options,resultFilter:t=>this.options.resultFilter(t)||r(t)})}}new class{constructor(){this.executor=new ft,this.onSuccess=this.executor.onSuccess,this.onFailure=this.executor.onFailure}async execute(t,e=ct){return(t=>{if("error"in t)throw t.error;return"success"in t?t.success:t.value})(await this.executor.invoke(t,{signal:e}))}};const vt=new yt({errorFilter:()=>!0,resultFilter:()=>!1});const mt={create({onDrain:t,collector:e}){let r="idle",n=[];const o=(i=vt,a={maxAttempts:1/0,backoff:new et({maxDelay:(s=3,60*(t=>1e3*t)(s))})},new ht({backoff:a.backoff||new Y(0),maxAttempts:a.maxAttempts??1/0},new ft(i.options.errorFilter,i.options.resultFilter)));var i,a,s;let u=null,c=null;const l=()=>{0!==n.length&&"idle"===r&&(r="scheduled",u=setTimeout((async()=>{r="running";const i=n.splice(0);c=new AbortController,c.signal.addEventListener("abort",(()=>{n=[...i,...n]})),await o.execute((async({signal:n})=>{try{await e.send(i,{signal:n})}catch(t){if(n.aborted)return;throw t}n.aborted||(null==t||t(),r="idle",u=null,c=null,l())}),c.signal)}),20))};return{send(t){if(!E(t))throw new Error("Event must be a PinoLog");n.push(t),l()},resume(){r="idle",l()},pause(){r="stopped",u&&(clearTimeout(u),u=null),c&&(c.abort(),c=null)}}}};var _t="undefined"!=typeof globalThis?globalThis:"undefined"!="object"?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};var gt=function(t,e,r){return t(r={path:e,exports:{},require:function(t,e){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==e&&r.path)}},r.exports),r.exports}((function(t,e){var r="undefined"!=typeof self?self:_t,n=function(){function t(){this.fetch=!1,this.DOMException=r.DOMException}return t.prototype=r,new t}();!function(t){!function(e){var r="URLSearchParams"in t,n="Symbol"in t&&"iterator"in Symbol,o="FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),i="FormData"in t,a="ArrayBuffer"in t;if(a)var s=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],u=ArrayBuffer.isView||function(t){return t&&s.indexOf(Object.prototype.toString.call(t))>-1};function c(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function l(t){return"string"!=typeof t&&(t=String(t)),t}function f(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return n&&(e[Symbol.iterator]=function(){return e}),e}function p(t){this.map={},t instanceof p?t.forEach((function(t,e){this.append(e,t)}),this):Array.isArray(t)?t.forEach((function(t){this.append(t[0],t[1])}),this):t&&Object.getOwnPropertyNames(t).forEach((function(e){this.append(e,t[e])}),this)}function h(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function d(t){return new Promise((function(e,r){t.onload=function(){e(t.result)},t.onerror=function(){r(t.error)}}))}function y(t){var e=new FileReader,r=d(e);return e.readAsArrayBuffer(t),r}function v(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function m(){return this.bodyUsed=!1,this._initBody=function(t){var e;this._bodyInit=t,t?"string"==typeof t?this._bodyText=t:o&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:i&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:r&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():a&&o&&((e=t)&&DataView.prototype.isPrototypeOf(e))?(this._bodyArrayBuffer=v(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):a&&(ArrayBuffer.prototype.isPrototypeOf(t)||u(t))?this._bodyArrayBuffer=v(t):this._bodyText=t=Object.prototype.toString.call(t):this._bodyText="",this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):r&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},o&&(this.blob=function(){var t=h(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?h(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(y)}),this.text=function(){var t,e,r,n=h(this);if(n)return n;if(this._bodyBlob)return t=this._bodyBlob,e=new FileReader,r=d(e),e.readAsText(t),r;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),r=new Array(e.length),n=0;n<e.length;n++)r[n]=String.fromCharCode(e[n]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},i&&(this.formData=function(){return this.text().then(b)}),this.json=function(){return this.text().then(JSON.parse)},this}p.prototype.append=function(t,e){t=c(t),e=l(e);var r=this.map[t];this.map[t]=r?r+", "+e:e},p.prototype.delete=function(t){delete this.map[c(t)]},p.prototype.get=function(t){return t=c(t),this.has(t)?this.map[t]:null},p.prototype.has=function(t){return this.map.hasOwnProperty(c(t))},p.prototype.set=function(t,e){this.map[c(t)]=l(e)},p.prototype.forEach=function(t,e){for(var r in this.map)this.map.hasOwnProperty(r)&&t.call(e,this.map[r],r,this)},p.prototype.keys=function(){var t=[];return this.forEach((function(e,r){t.push(r)})),f(t)},p.prototype.values=function(){var t=[];return this.forEach((function(e){t.push(e)})),f(t)},p.prototype.entries=function(){var t=[];return this.forEach((function(e,r){t.push([r,e])})),f(t)},n&&(p.prototype[Symbol.iterator]=p.prototype.entries);var _=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function g(t,e){var r,n,o=(e=e||{}).body;if(t instanceof g){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new p(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,o||null==t._bodyInit||(o=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",!e.headers&&this.headers||(this.headers=new p(e.headers)),this.method=(r=e.method||this.method||"GET",n=r.toUpperCase(),_.indexOf(n)>-1?n:r),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&o)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(o)}function b(t){var e=new FormData;return t.trim().split("&").forEach((function(t){if(t){var r=t.split("="),n=r.shift().replace(/\+/g," "),o=r.join("=").replace(/\+/g," ");e.append(decodeURIComponent(n),decodeURIComponent(o))}})),e}function E(t,e){e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new p(e.headers),this.url=e.url||"",this._initBody(t)}g.prototype.clone=function(){return new g(this,{body:this._bodyInit})},m.call(g.prototype),m.call(E.prototype),E.prototype.clone=function(){return new E(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new p(this.headers),url:this.url})},E.error=function(){var t=new E(null,{status:0,statusText:""});return t.type="error",t};var w=[301,302,303,307,308];E.redirect=function(t,e){if(-1===w.indexOf(e))throw new RangeError("Invalid status code");return new E(null,{status:e,headers:{location:t}})},e.DOMException=t.DOMException;try{new e.DOMException}catch(t){e.DOMException=function(t,e){this.message=t,this.name=e;var r=Error(t);this.stack=r.stack},e.DOMException.prototype=Object.create(Error.prototype),e.DOMException.prototype.constructor=e.DOMException}function T(t,r){return new Promise((function(n,i){var a=new g(t,r);if(a.signal&&a.signal.aborted)return i(new e.DOMException("Aborted","AbortError"));var s=new XMLHttpRequest;function u(){s.abort()}s.onload=function(){var t,e,r={status:s.status,statusText:s.statusText,headers:(t=s.getAllResponseHeaders()||"",e=new p,t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(t){var r=t.split(":"),n=r.shift().trim();if(n){var o=r.join(":").trim();e.append(n,o)}})),e)};r.url="responseURL"in s?s.responseURL:r.headers.get("X-Request-URL");var o="response"in s?s.response:s.responseText;n(new E(o,r))},s.onerror=function(){i(new TypeError("Network request failed"))},s.ontimeout=function(){i(new TypeError("Network request failed"))},s.onabort=function(){i(new e.DOMException("Aborted","AbortError"))},s.open(a.method,a.url,!0),"include"===a.credentials?s.withCredentials=!0:"omit"===a.credentials&&(s.withCredentials=!1),"responseType"in s&&o&&(s.responseType="blob"),a.headers.forEach((function(t,e){s.setRequestHeader(e,t)})),a.signal&&(a.signal.addEventListener("abort",u),s.onreadystatechange=function(){4===s.readyState&&a.signal.removeEventListener("abort",u)}),s.send(void 0===a._bodyInit?null:a._bodyInit)}))}T.polyfill=!0,t.fetch||(t.fetch=T,t.Headers=p,t.Request=g,t.Response=E),e.Headers=p,e.Request=g,e.Response=E,e.fetch=T,Object.defineProperty(e,"__esModule",{value:!0})}({})}(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var o=n;(e=o.fetch).default=o.fetch,e.fetch=o.fetch,e.Headers=o.Headers,e.Request=o.Request,e.Response=o.Response,t.exports=e}));class bt extends Error{name=this.constructor.name}class Et extends bt{name=this.constructor.name;constructor(t,{statusCode:e,response:r}){super(`Status code (${e}) and body (${S(t)})`),this.statusCode=e,this.response=r}}class wt extends bt{name=this.constructor.name;constructor(t,e){super(t),this.timeoutMs=e}}const Tt=async(t,{timeoutMs:e=1e4,signal:r,...n})=>{let o=!1;const i=new AbortController,a=setTimeout((()=>{o=!0,i.abort()}),e),s=()=>{clearTimeout(a),i.abort()};null==r||r.addEventListener("abort",s);try{return await gt.fetch(t,{signal:i.signal,credentials:"include",...n})}catch(t){if(o&&t instanceof Error&&"AbortError"===t.name)throw new wt(`Reached request timeout in ${e} ms`,e);throw t}finally{clearTimeout(a),null==r||r.removeEventListener("abort",s)}},Ot={create({searchIndex:t,endpoint:e,token:r}){const n=F.create();return{async send(o,{signal:i}){const a=o.map((e=>n.format(Z({searchIndex:t,...e})))).join("\n");await(async(t,{headers:e,...r})=>{const n=await Tt(t,{headers:{Accept:"text/plain","Content-Type":"text/plain",...e},...r}),o=await n.text();if(!n.ok)throw new Et(o,{statusCode:n.status,response:n});return o})(e,{signal:i,method:"POST",body:a,headers:{ApiKey:r},credentials:"omit"})}}}},St={10:{level:"Debug",type:"Info"},20:{level:"Debug",type:"Info"},30:{level:"Important",type:"Info"},40:{level:"Important",type:"Warn"},50:{level:"Important",type:"Error"},60:{level:"Critical",type:"Error"}},At={create:({endpoint:t,token:e,path:r="/services/collector/event",sourcetype:n="log",host:o="-"})=>({async send(i,{signal:a}){const s=i.map((t=>{const{level:e,time:r,...i}=t;return{sourcetype:n,host:o,time:r,event:{...St[e],...i}}})).map((t=>S(t))).join("\n");await(async(t,{headers:e,...r})=>{const n=await Tt(t,{headers:{Accept:"application/json","Content-Type":"application/json",...e},...r}),o=await n.json();if(!n.ok)throw new Et(o,{statusCode:n.status,response:n});return o})(`${t}${r}`,{signal:a,method:"POST",body:s,credentials:"omit",headers:{Authorization:`Splunk ${e}`}})}})};var Rt="process.runtime.name",Pt="service.name",xt="service.version",Mt="telemetry.sdk.name",Lt="telemetry.sdk.language",Ct="telemetry.sdk.version",Nt="object"==typeof globalThis?globalThis:"object"==typeof self?self:window,It="1.2.0",Ut=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;var kt=function(t){var e=new Set([t]),r=new Set,n=t.match(Ut);if(!n)return function(){return!1};var o=+n[1],i=+n[2],a=+n[3];if(null!=n[4])return function(e){return e===t};function s(t){return r.add(t),!1}function u(t){return e.add(t),!0}return function(t){if(e.has(t))return!0;if(r.has(t))return!1;var n=t.match(Ut);if(!n)return s(t);var c=+n[1],l=+n[2],f=+n[3];return null!=n[4]||o!==c?s(t):0===o?i===l&&a<=f?u(t):s(t):i<=l?u(t):s(t)}}(It),Dt=It.split(".")[0],jt=Symbol.for("opentelemetry.js.api."+Dt),Bt=Nt;function Vt(t,e,r,n){var o;void 0===n&&(n=!1);var i=Bt[jt]=null!==(o=Bt[jt])&&void 0!==o?o:{version:It};if(!n&&i[t]){var a=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+t);return r.error(a.stack||a.message),!1}if(i.version!==It){a=new Error("@opentelemetry/api: All API registration versions must match");return r.error(a.stack||a.message),!1}return i[t]=e,r.debug("@opentelemetry/api: Registered a global for "+t+" v"+"1.2.0."),!0}function Ft(t){var e,r,n=null===(e=Bt[jt])||void 0===e?void 0:e.version;if(n&&kt(n))return null===(r=Bt[jt])||void 0===r?void 0:r[t]}function Gt(t,e){e.debug("@opentelemetry/api: Unregistering a global for "+t+" v"+"1.2.0.");var r=Bt[jt];r&&delete r[t]}var Ht,Xt=function(){function t(t){this._namespace=t.namespace||"DiagComponentLogger"}return t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return zt("debug",this._namespace,t)},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return zt("error",this._namespace,t)},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return zt("info",this._namespace,t)},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return zt("warn",this._namespace,t)},t.prototype.verbose=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return zt("verbose",this._namespace,t)},t}();function zt(t,e,r){var n=Ft("diag");if(n)return r.unshift(e),n[t].apply(n,r)}!function(t){t[t.NONE=0]="NONE",t[t.ERROR=30]="ERROR",t[t.WARN=50]="WARN",t[t.INFO=60]="INFO",t[t.DEBUG=70]="DEBUG",t[t.VERBOSE=80]="VERBOSE",t[t.ALL=9999]="ALL"}(Ht||(Ht={}));var $t=function(){function t(){function t(t){return function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=Ft("diag");if(n)return n[t].apply(n,e)}}var e=this;e.setLogger=function(t,r){var n,o;if(void 0===r&&(r=Ht.INFO),t===e){var i=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return e.error(null!==(n=i.stack)&&void 0!==n?n:i.message),!1}var a=Ft("diag"),s=function(t,e){function r(r,n){var o=e[r];return"function"==typeof o&&t>=n?o.bind(e):function(){}}return t<Ht.NONE?t=Ht.NONE:t>Ht.ALL&&(t=Ht.ALL),e=e||{},{error:r("error",Ht.ERROR),warn:r("warn",Ht.WARN),info:r("info",Ht.INFO),debug:r("debug",Ht.DEBUG),verbose:r("verbose",Ht.VERBOSE)}}(r,t);if(a){var u=null!==(o=(new Error).stack)&&void 0!==o?o:"<failed to generate stacktrace>";a.warn("Current logger will be overwritten from "+u),s.warn("Current logger will overwrite one already registered from "+u)}return Vt("diag",s,e,!0)},e.disable=function(){Gt("diag",e)},e.createComponentLogger=function(t){return new Xt(t)},e.verbose=t("verbose"),e.debug=t("debug"),e.info=t("info"),e.warn=t("warn"),e.error=t("error")}return t.instance=function(){return this._instance||(this._instance=new t),this._instance},t}(),Wt=function(){function t(t){this._entries=t?new Map(t):new Map}return t.prototype.getEntry=function(t){var e=this._entries.get(t);if(e)return Object.assign({},e)},t.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map((function(t){return[t[0],t[1]]}))},t.prototype.setEntry=function(e,r){var n=new t(this._entries);return n._entries.set(e,r),n},t.prototype.removeEntry=function(e){var r=new t(this._entries);return r._entries.delete(e),r},t.prototype.removeEntries=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];for(var n=new t(this._entries),o=0,i=e;o<i.length;o++){var a=i[o];n._entries.delete(a)}return n},t.prototype.clear=function(){return new t},t}(),Kt=Symbol("BaggageEntryMetadata"),qt=$t.instance();function Jt(t){return void 0===t&&(t={}),new Wt(new Map(Object.entries(t)))}var Zt={get:function(t,e){if(null!=t)return t[e]},keys:function(t){return null==t?[]:Object.keys(t)}},Yt={set:function(t,e,r){null!=t&&(t[e]=r)}};function Qt(t){return Symbol.for(t)}var te,ee=function t(e){var r=this;r._currentContext=e?new Map(e):new Map,r.getValue=function(t){return r._currentContext.get(t)},r.setValue=function(e,n){var o=new t(r._currentContext);return o._currentContext.set(e,n),o},r.deleteValue=function(e){var n=new t(r._currentContext);return n._currentContext.delete(e),n}},re=new ee,ne=function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t},oe=function(){function t(){}return t.prototype.active=function(){return re},t.prototype.with=function(t,e,r){for(var n=[],o=3;o<arguments.length;o++)n[o-3]=arguments[o];return e.call.apply(e,ne([r],n))},t.prototype.bind=function(t,e){return e},t.prototype.enable=function(){return this},t.prototype.disable=function(){return this},t}(),ie=function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t},ae="context",se=new oe,ue=function(){function t(){}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalContextManager=function(t){return Vt(ae,t,$t.instance())},t.prototype.active=function(){return this._getContextManager().active()},t.prototype.with=function(t,e,r){for(var n,o=[],i=3;i<arguments.length;i++)o[i-3]=arguments[i];return(n=this._getContextManager()).with.apply(n,ie([t,e,r],o))},t.prototype.bind=function(t,e){return this._getContextManager().bind(t,e)},t.prototype._getContextManager=function(){return Ft(ae)||se},t.prototype.disable=function(){this._getContextManager().disable(),Gt(ae,$t.instance())},t}();!function(t){t[t.NONE=0]="NONE",t[t.SAMPLED=1]="SAMPLED"}(te||(te={}));var ce="0000000000000000",le="00000000000000000000000000000000",fe={traceId:le,spanId:ce,traceFlags:te.NONE},pe=function(){function t(t){void 0===t&&(t=fe),this._spanContext=t}return t.prototype.spanContext=function(){return this._spanContext},t.prototype.setAttribute=function(t,e){return this},t.prototype.setAttributes=function(t){return this},t.prototype.addEvent=function(t,e){return this},t.prototype.setStatus=function(t){return this},t.prototype.updateName=function(t){return this},t.prototype.end=function(t){},t.prototype.isRecording=function(){return!1},t.prototype.recordException=function(t,e){},t}(),he=Qt("OpenTelemetry Context Key SPAN");function de(t){return t.getValue(he)||void 0}function ye(){return de(ue.getInstance().active())}function ve(t,e){return t.setValue(he,e)}function me(t){return t.deleteValue(he)}function _e(t,e){return ve(t,new pe(e))}function ge(t){var e;return null===(e=de(t))||void 0===e?void 0:e.spanContext()}var be=/^([0-9a-f]{32})$/i,Ee=/^[0-9a-f]{16}$/i;function we(t){return r=t.traceId,be.test(r)&&r!==le&&(e=t.spanId,Ee.test(e)&&e!==ce);var e,r}function Te(t){return new pe(t)}var Oe=ue.getInstance(),Se=function(){function t(){}return t.prototype.startSpan=function(t,e,r){if(Boolean(null==e?void 0:e.root))return new pe;var n,o=r&&ge(r);return"object"==typeof(n=o)&&"string"==typeof n.spanId&&"string"==typeof n.traceId&&"number"==typeof n.traceFlags&&we(o)?new pe(o):new pe},t.prototype.startActiveSpan=function(t,e,r,n){var o,i,a;if(!(arguments.length<2)){2===arguments.length?a=e:3===arguments.length?(o=e,a=r):(o=e,i=r,a=n);var s=null!=i?i:Oe.active(),u=this.startSpan(t,o,s),c=ve(s,u);return Oe.with(c,a,void 0,u)}},t}();var Ae,Re,Pe,xe=new Se,Me=function(){function t(t,e,r,n){this._provider=t,this.name=e,this.version=r,this.options=n}return t.prototype.startSpan=function(t,e,r){return this._getTracer().startSpan(t,e,r)},t.prototype.startActiveSpan=function(t,e,r,n){var o=this._getTracer();return Reflect.apply(o.startActiveSpan,o,arguments)},t.prototype._getTracer=function(){if(this._delegate)return this._delegate;var t=this._provider.getDelegateTracer(this.name,this.version,this.options);return t?(this._delegate=t,this._delegate):xe},t}(),Le=new(function(){function t(){}return t.prototype.getTracer=function(t,e,r){return new Se},t}()),Ce=function(){function t(){}return t.prototype.getTracer=function(t,e,r){var n;return null!==(n=this.getDelegateTracer(t,e,r))&&void 0!==n?n:new Me(this,t,e,r)},t.prototype.getDelegate=function(){var t;return null!==(t=this._delegate)&&void 0!==t?t:Le},t.prototype.setDelegate=function(t){this._delegate=t},t.prototype.getDelegateTracer=function(t,e,r){var n;return null===(n=this._delegate)||void 0===n?void 0:n.getTracer(t,e,r)},t}();!function(t){t[t.NOT_RECORD=0]="NOT_RECORD",t[t.RECORD=1]="RECORD",t[t.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"}(Ae||(Ae={})),function(t){t[t.INTERNAL=0]="INTERNAL",t[t.SERVER=1]="SERVER",t[t.CLIENT=2]="CLIENT",t[t.PRODUCER=3]="PRODUCER",t[t.CONSUMER=4]="CONSUMER"}(Re||(Re={})),function(t){t[t.UNSET=0]="UNSET",t[t.OK=1]="OK",t[t.ERROR=2]="ERROR"}(Pe||(Pe={}));var Ne="trace",Ie=function(){function t(){this._proxyTracerProvider=new Ce,this.wrapSpanContext=Te,this.isSpanContextValid=we,this.deleteSpan=me,this.getSpan=de,this.getActiveSpan=ye,this.getSpanContext=ge,this.setSpan=ve,this.setSpanContext=_e}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalTracerProvider=function(t){var e=Vt(Ne,this._proxyTracerProvider,$t.instance());return e&&this._proxyTracerProvider.setDelegate(t),e},t.prototype.getTracerProvider=function(){return Ft(Ne)||this._proxyTracerProvider},t.prototype.getTracer=function(t,e){return this.getTracerProvider().getTracer(t,e)},t.prototype.disable=function(){Gt(Ne,$t.instance()),this._proxyTracerProvider=new Ce},t}(),Ue=function(){function t(){}return t.prototype.inject=function(t,e){},t.prototype.extract=function(t,e){return t},t.prototype.fields=function(){return[]},t}(),ke=Qt("OpenTelemetry Baggage Key");function De(t){return t.getValue(ke)||void 0}function je(t,e){return t.setValue(ke,e)}function Be(t){return t.deleteValue(ke)}var Ve="propagation",Fe=new Ue,Ge=function(){function t(){this.createBaggage=Jt,this.getBaggage=De,this.setBaggage=je,this.deleteBaggage=Be}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalPropagator=function(t){return Vt(Ve,t,$t.instance())},t.prototype.inject=function(t,e,r){return void 0===r&&(r=Yt),this._getGlobalPropagator().inject(t,e,r)},t.prototype.extract=function(t,e,r){return void 0===r&&(r=Zt),this._getGlobalPropagator().extract(t,e,r)},t.prototype.fields=function(){return this._getGlobalPropagator().fields()},t.prototype.disable=function(){Gt(Ve,$t.instance())},t.prototype._getGlobalPropagator=function(){return Ft(Ve)||Fe},t}(),He=ue.getInstance();Ie.getInstance(),Ge.getInstance();var Xe=$t.instance();function ze(t){var e=t.split(";");if(!(e.length<=0)){var r=e.shift();if(r){var n=r.split("=");if(2===n.length){var o,i,a=decodeURIComponent(n[0].trim()),s=decodeURIComponent(n[1].trim());return e.length>0&&("string"!=typeof(i=e.join(";"))&&(qt.error("Cannot create baggage metadata from unknown type: "+typeof i),i=""),o={__TYPE__:Kt,toString:function(){return i}}),{key:a,value:s,metadata:o}}}}}function $e(t){return"string"!=typeof t||0===t.length?{}:t.split(",").map((function(t){return ze(t)})).filter((function(t){return void 0!==t&&t.value.length>0})).reduce((function(t,e){return t[e.key]=e.value,t}),{})}var We,Ke=function(t){Xe.error(function(t){return"string"==typeof t?t:JSON.stringify(function(t){for(var e={},r=t;null!==r;)Object.getOwnPropertyNames(r).forEach((function(t){if(!e[t]){var n=r[t];n&&(e[t]=String(n))}})),r=Object.getPrototypeOf(r);return e}(t))}(t))};!function(t){t.AlwaysOff="always_off",t.AlwaysOn="always_on",t.ParentBasedAlwaysOff="parentbased_always_off",t.ParentBasedAlwaysOn="parentbased_always_on",t.ParentBasedTraceIdRatio="parentbased_traceidratio",t.TraceIdRatio="traceidratio"}(We||(We={}));var qe="object"==typeof globalThis?globalThis:"object"==typeof self?self:window,Je=["OTEL_BSP_EXPORT_TIMEOUT","OTEL_BSP_MAX_EXPORT_BATCH_SIZE","OTEL_BSP_MAX_QUEUE_SIZE","OTEL_BSP_SCHEDULE_DELAY","OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_EVENT_COUNT_LIMIT","OTEL_SPAN_LINK_COUNT_LIMIT","OTEL_EXPORTER_OTLP_TIMEOUT","OTEL_EXPORTER_OTLP_TRACES_TIMEOUT","OTEL_EXPORTER_OTLP_METRICS_TIMEOUT","OTEL_EXPORTER_JAEGER_AGENT_PORT"];function Ze(t){return Je.indexOf(t)>-1}var Ye=["OTEL_NO_PATCH_MODULES","OTEL_PROPAGATORS"];function Qe(t){return Ye.indexOf(t)>-1}var tr=1/0,er={CONTAINER_NAME:"",ECS_CONTAINER_METADATA_URI_V4:"",ECS_CONTAINER_METADATA_URI:"",HOSTNAME:"",KUBERNETES_SERVICE_HOST:"",NAMESPACE:"",OTEL_BSP_EXPORT_TIMEOUT:3e4,OTEL_BSP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BSP_MAX_QUEUE_SIZE:2048,OTEL_BSP_SCHEDULE_DELAY:5e3,OTEL_EXPORTER_JAEGER_AGENT_HOST:"",OTEL_EXPORTER_JAEGER_AGENT_PORT:6832,OTEL_EXPORTER_JAEGER_ENDPOINT:"",OTEL_EXPORTER_JAEGER_PASSWORD:"",OTEL_EXPORTER_JAEGER_USER:"",OTEL_EXPORTER_OTLP_ENDPOINT:"",OTEL_EXPORTER_OTLP_TRACES_ENDPOINT:"",OTEL_EXPORTER_OTLP_METRICS_ENDPOINT:"",OTEL_EXPORTER_OTLP_HEADERS:"",OTEL_EXPORTER_OTLP_TRACES_HEADERS:"",OTEL_EXPORTER_OTLP_METRICS_HEADERS:"",OTEL_EXPORTER_OTLP_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_TRACES_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_METRICS_TIMEOUT:1e4,OTEL_EXPORTER_ZIPKIN_ENDPOINT:"http://localhost:9411/api/v2/spans",OTEL_LOG_LEVEL:Ht.INFO,OTEL_NO_PATCH_MODULES:[],OTEL_PROPAGATORS:["tracecontext","baggage"],OTEL_RESOURCE_ATTRIBUTES:"",OTEL_SERVICE_NAME:"",OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT:tr,OTEL_ATTRIBUTE_COUNT_LIMIT:128,OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT:tr,OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT:128,OTEL_SPAN_EVENT_COUNT_LIMIT:128,OTEL_SPAN_LINK_COUNT_LIMIT:128,OTEL_TRACES_EXPORTER:"none",OTEL_TRACES_SAMPLER:We.ParentBasedAlwaysOn,OTEL_TRACES_SAMPLER_ARG:"",OTEL_EXPORTER_OTLP_INSECURE:"",OTEL_EXPORTER_OTLP_TRACES_INSECURE:"",OTEL_EXPORTER_OTLP_METRICS_INSECURE:"",OTEL_EXPORTER_OTLP_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CERTIFICATE:"",OTEL_EXPORTER_OTLP_COMPRESSION:"",OTEL_EXPORTER_OTLP_TRACES_COMPRESSION:"",OTEL_EXPORTER_OTLP_METRICS_COMPRESSION:"",OTEL_EXPORTER_OTLP_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_CERTIFICATE:""};function rr(t,e,r,n,o){if(void 0===n&&(n=-1/0),void 0===o&&(o=1/0),void 0!==r[t]){var i=Number(r[t]);isNaN(i)||(e[t]=i<n?n:i>o?o:i)}}function nr(t,e,r,n){void 0===n&&(n=",");var o=r[t];"string"==typeof o&&(e[t]=o.split(n).map((function(t){return t.trim()})))}var or={ALL:Ht.ALL,VERBOSE:Ht.VERBOSE,DEBUG:Ht.DEBUG,INFO:Ht.INFO,WARN:Ht.WARN,ERROR:Ht.ERROR,NONE:Ht.NONE};function ir(t,e,r){var n=r[t];if("string"==typeof n){var o=or[n.toUpperCase()];null!=o&&(e[t]=o)}}function ar(){var t=function(t){var e={};for(var r in er){var n=r;if("OTEL_LOG_LEVEL"===n)ir(n,e,t);else if(Ze(n))rr(n,e,t);else if(Qe(n))nr(n,e,t);else{var o=t[n];null!=o&&(e[n]=String(o))}}return e}(qe);return Object.assign({},er,t)}Array(32);var sr,ur=performance,cr=((sr={})[Mt]="opentelemetry",sr[Rt]="browser",sr[Lt]="webjs",sr[Ct]="1.6.0",sr);var lr,fr,pr=Math.pow(10,9);function hr(t){var e=t/1e3,r=Math.trunc(e);return[r,Number((e-r).toFixed(9))*pr]}function dr(t){var e=hr(function(){var t=ur.timeOrigin;if("number"!=typeof t){var e=ur;t=e.timing&&e.timing.fetchStart}return t}()),r=hr("number"==typeof t?t:ur.now()),n=e[0]+r[0],o=e[1]+r[1];return o>pr&&(o-=pr,n+=1),[n,o]}function yr(t){return t[0]*pr+t[1]}function vr(t){return Math.round(1e6*t[0]+t[1]/1e3)}!function(t){t[t.SUCCESS=0]="SUCCESS",t[t.FAILED=1]="FAILED"}(lr||(lr={})),function(t){t.HTTP="http"}(fr||(fr={})),Function.prototype.toString.call(Object);var mr=function(){function t(){var t=this;this._promise=new Promise((function(e,r){t._resolve=e,t._reject=r}))}return Object.defineProperty(t.prototype,"promise",{get:function(){return this._promise},enumerable:!1,configurable:!0}),t.prototype.resolve=function(t){this._resolve(t)},t.prototype.reject=function(t){this._reject(t)},t}(),_r=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},gr=function(t,e,r){if(r||2===arguments.length)for(var n,o=0,i=e.length;o<i;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))},br=function(){function t(t,e){this._callback=t,this._that=e,this._isCalled=!1,this._deferred=new mr}return Object.defineProperty(t.prototype,"isCalled",{get:function(){return this._isCalled},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"promise",{get:function(){return this._deferred.promise},enumerable:!1,configurable:!0}),t.prototype.call=function(){for(var t,e=this,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];if(!this._isCalled){this._isCalled=!0;try{Promise.resolve((t=this._callback).call.apply(t,gr([this._that],_r(r),!1))).then((function(t){return e._deferred.resolve(t)}),(function(t){return e._deferred.reject(t)}))}catch(t){this._deferred.reject(t)}}return this._deferred.promise},t}();var Er,wr,Tr=function(){function t(t){this.attributes=t}return t.empty=function(){return t.EMPTY},t.default=function(){var e;return new t(((e={})[Pt]="unknown_service",e[Lt]=cr[Lt],e[Mt]=cr[Mt],e[Ct]=cr[Ct],e))},t.prototype.merge=function(e){return e&&Object.keys(e.attributes).length?new t(Object.assign({},this.attributes,e.attributes)):this},t.EMPTY=new t({}),t}();!function(t){t[t.DELTA=0]="DELTA",t[t.CUMULATIVE=1]="CUMULATIVE"}(Er||(Er={})),function(t){t[t.HISTOGRAM=0]="HISTOGRAM",t[t.EXPONENTIAL_HISTOGRAM=1]="EXPONENTIAL_HISTOGRAM",t[t.GAUGE=2]="GAUGE",t[t.SUM=3]="SUM"}(wr||(wr={}));var Or,Sr=(Or=function(t,e){return Or=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},Or(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}Or(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),Ar=function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((n=n.apply(t,e||[])).next())}))},Rr=function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Pr=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},xr=function(t,e,r){if(r||2===arguments.length)for(var n,o=0,i=e.length;o<i;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))},Mr=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function Lr(t){return null!=t}function Cr(t){var e=Object.keys(t);return 0===e.length?"":(e=e.sort(),JSON.stringify(e.map((function(e){return[e,t[e]]}))))}var Nr=function(t){function e(r){var n=t.call(this,r)||this;return Object.setPrototypeOf(n,e.prototype),n}return Sr(e,t),e}(Error);function Ir(t,e){var r,n=new Promise((function(t,n){r=setTimeout((function(){n(new Nr("Operation timed out."))}),e)}));return Promise.race([t,n]).then((function(t){return clearTimeout(r),t}),(function(t){throw clearTimeout(r),t}))}function Ur(t){return Ar(this,void 0,void 0,(function(){var e=this;return Rr(this,(function(r){return[2,Promise.all(t.map((function(t){return Ar(e,void 0,void 0,(function(){return Rr(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,t];case 1:return[2,{status:"fulfilled",value:e.sent()}];case 2:return[2,{status:"rejected",reason:e.sent()}];case 3:return[2]}}))}))})))]}))}))}function kr(t){return"rejected"===t.status}function Dr(t,e){var r=[];return t.forEach((function(t){r.push.apply(r,xr([],Pr(e(t)),!1))})),r}var jr,Br=function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((n=n.apply(t,e||[])).next())}))},Vr=function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Fr=function(){function t(){this._shutdown=!1}return t.prototype.setMetricProducer=function(t){if(this._metricProducer)throw new Error("MetricReader can not be bound to a MeterProvider again.");this._metricProducer=t,this.onInitialized()},t.prototype.onInitialized=function(){},t.prototype.collect=function(t){return Br(this,void 0,void 0,(function(){return Vr(this,(function(e){if(void 0===this._metricProducer)throw new Error("MetricReader is not bound to a MetricProducer");if(this._shutdown)throw new Error("MetricReader is shutdown");return[2,this._metricProducer.collect({timeoutMillis:null==t?void 0:t.timeoutMillis})]}))}))},t.prototype.shutdown=function(t){return Br(this,void 0,void 0,(function(){return Vr(this,(function(e){switch(e.label){case 0:return this._shutdown?(Xe.error("Cannot call shutdown twice."),[2]):null!=(null==t?void 0:t.timeoutMillis)?[3,2]:[4,this.onShutdown()];case 1:return e.sent(),[3,4];case 2:return[4,Ir(this.onShutdown(),t.timeoutMillis)];case 3:e.sent(),e.label=4;case 4:return this._shutdown=!0,[2]}}))}))},t.prototype.forceFlush=function(t){return Br(this,void 0,void 0,(function(){return Vr(this,(function(e){switch(e.label){case 0:return this._shutdown?(Xe.warn("Cannot forceFlush on already shutdown MetricReader."),[2]):null!=(null==t?void 0:t.timeoutMillis)?[3,2]:[4,this.onForceFlush()];case 1:case 3:return e.sent(),[2];case 2:return[4,Ir(this.onForceFlush(),t.timeoutMillis)]}}))}))},t}(),Gr=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Hr=function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((n=n.apply(t,e||[])).next())}))},Xr=function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},zr=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},$r=function(t,e,r){if(r||2===arguments.length)for(var n,o=0,i=e.length;o<i;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))},Wr=function(t){function e(e){var r,n,o=t.call(this)||this;if(void 0!==e.exportIntervalMillis&&e.exportIntervalMillis<=0)throw Error("exportIntervalMillis must be greater than 0");if(void 0!==e.exportTimeoutMillis&&e.exportTimeoutMillis<=0)throw Error("exportTimeoutMillis must be greater than 0");if(void 0!==e.exportTimeoutMillis&&void 0!==e.exportIntervalMillis&&e.exportIntervalMillis<e.exportTimeoutMillis)throw Error("exportIntervalMillis must be greater than or equal to exportTimeoutMillis");return o._exportInterval=null!==(r=e.exportIntervalMillis)&&void 0!==r?r:6e4,o._exportTimeout=null!==(n=e.exportTimeoutMillis)&&void 0!==n?n:3e4,o._exporter=e.exporter,o}return Gr(e,t),e.prototype._runOnce=function(){return Hr(this,void 0,void 0,(function(){var t,e,r,n,o=this;return Xr(this,(function(i){switch(i.label){case 0:return[4,this.collect({})];case 1:return t=i.sent(),e=t.resourceMetrics,(r=t.errors).length>0&&(n=Xe).error.apply(n,$r(["PeriodicExportingMetricReader: metrics collection errors"],zr(r),!1)),[2,new Promise((function(t,r){o._exporter.export(e,(function(e){var n;e.code!==lr.SUCCESS?r(null!==(n=e.error)&&void 0!==n?n:new Error("PeriodicExportingMetricReader: metrics export failed (error "+e.error+")")):t()}))}))]}}))}))},e.prototype.onInitialized=function(){var t=this;this._interval=setInterval((function(){return Hr(t,void 0,void 0,(function(){var t;return Xr(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,Ir(this._runOnce(),this._exportTimeout)];case 1:return e.sent(),[3,3];case 2:return(t=e.sent())instanceof Nr?(Xe.error("Export took longer than %s milliseconds and timed out.",this._exportTimeout),[2]):(function(t){try{Ke(t)}catch(t){}}(t),[3,3]);case 3:return[2]}}))}))}),this._exportInterval),this._interval},e.prototype.onForceFlush=function(){return Hr(this,void 0,void 0,(function(){return Xr(this,(function(t){switch(t.label){case 0:return[4,this._exporter.forceFlush()];case 1:return t.sent(),[2]}}))}))},e.prototype.onShutdown=function(){return Hr(this,void 0,void 0,(function(){return Xr(this,(function(t){switch(t.label){case 0:return this._interval&&clearInterval(this._interval),[4,this._exporter.shutdown()];case 1:return t.sent(),[2]}}))}))},e.prototype.selectAggregationTemporality=function(t){return this._exporter.selectAggregationTemporality(t)},e}(Fr),Kr=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},qr=function(){function t(){this._shutdown=!1}return t.prototype.export=function(e,r){if(!this._shutdown)return t._sendMetrics(e,r);setImmediate(r,{code:lr.FAILED})},t.prototype.forceFlush=function(){return Promise.resolve()},t.prototype.selectAggregationTemporality=function(t){return Er.CUMULATIVE},t.prototype.shutdown=function(){return this._shutdown=!0,Promise.resolve()},t._sendMetrics=function(t,e){var r,n,o,i;try{for(var a=Kr(t.scopeMetrics),s=a.next();!s.done;s=a.next()){var u=s.value;try{for(var c=(o=void 0,Kr(u.metrics)),l=c.next();!l.done;l=c.next()){var f=l.value;console.dir({descriptor:f.descriptor,dataPointType:f.dataPointType,dataPoints:f.dataPoints})}}catch(t){o={error:t}}finally{try{l&&!l.done&&(i=c.return)&&i.call(c)}finally{if(o)throw o.error}}}}catch(t){r={error:t}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}e({code:lr.SUCCESS})},t}(),Jr=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Zr=function(){function t(){}return t.prototype.createHistogram=function(t,e){return cn},t.prototype.createCounter=function(t,e){return un},t.prototype.createUpDownCounter=function(t,e){return ln},t.prototype.createObservableGauge=function(t,e){return pn},t.prototype.createObservableCounter=function(t,e){return fn},t.prototype.createObservableUpDownCounter=function(t,e){return hn},t.prototype.addBatchObservableCallback=function(t,e){},t.prototype.removeBatchObservableCallback=function(t){},t}(),Yr=function(){},Qr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Jr(e,t),e.prototype.add=function(t,e){},e}(Yr),tn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Jr(e,t),e.prototype.add=function(t,e){},e}(Yr),en=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Jr(e,t),e.prototype.record=function(t,e){},e}(Yr),rn=function(){function t(){}return t.prototype.addCallback=function(t){},t.prototype.removeCallback=function(t){},t}(),nn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Jr(e,t),e}(rn),on=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Jr(e,t),e}(rn),an=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Jr(e,t),e}(rn),sn=new Zr,un=new Qr,cn=new en,ln=new tn,fn=new nn,pn=new on,hn=new an,dn=new(function(){function t(){}return t.prototype.getMeter=function(t,e,r){return sn},t}());!function(t){t[t.INT=0]="INT",t[t.DOUBLE=1]="DOUBLE"}(jr||(jr={}));var yn="object"==typeof globalThis?globalThis:"object"==typeof self?self:window,vn=Symbol.for("io.opentelemetry.js.api.metrics"),mn=yn;var _n,gn=function(){function t(){}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalMeterProvider=function(t){return mn[vn]?this.getMeterProvider():(mn[vn]=function(t,e,r){return function(n){return n===t?e:r}}(4,t,dn),t)},t.prototype.getMeterProvider=function(){var t,e;return null!==(e=null===(t=mn[vn])||void 0===t?void 0:t.call(mn,4))&&void 0!==e?e:dn},t.prototype.getMeter=function(t,e,r){return this.getMeterProvider().getMeter(t,e,r)},t.prototype.disable=function(){delete mn[vn]},t}();function bn(t,e,r){var n,o,i;return{name:t,type:e,description:null!==(n=null==r?void 0:r.description)&&void 0!==n?n:"",unit:null!==(o=null==r?void 0:r.unit)&&void 0!==o?o:"",valueType:null!==(i=null==r?void 0:r.valueType)&&void 0!==i?i:jr.DOUBLE}}function En(t,e){var r,n;return{name:null!==(r=t.name)&&void 0!==r?r:e.name,description:null!==(n=t.description)&&void 0!==n?n:e.description,type:e.type,unit:e.unit,valueType:e.valueType}}gn.getInstance(),function(t){t.COUNTER="COUNTER",t.HISTOGRAM="HISTOGRAM",t.UP_DOWN_COUNTER="UP_DOWN_COUNTER",t.OBSERVABLE_COUNTER="OBSERVABLE_COUNTER",t.OBSERVABLE_GAUGE="OBSERVABLE_GAUGE",t.OBSERVABLE_UP_DOWN_COUNTER="OBSERVABLE_UP_DOWN_COUNTER"}(_n||(_n={}));var wn=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Tn=function(){function t(t,e){this._writableMetricStorage=t,this._descriptor=e}return t.prototype._record=function(t,e,r){void 0===e&&(e={}),void 0===r&&(r=He.active()),this._descriptor.valueType!==jr.INT||Number.isInteger(t)||(Xe.warn("INT value type cannot accept a floating-point value for "+this._descriptor.name+", ignoring the fractional digits."),t=Math.trunc(t)),this._writableMetricStorage.record(t,e,r,dr())},t}(),On=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return wn(e,t),e.prototype.add=function(t,e,r){this._record(t,e,r)},e}(Tn),Sn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return wn(e,t),e.prototype.add=function(t,e,r){t<0?Xe.warn("negative value provided to counter "+this._descriptor.name+": "+t):this._record(t,e,r)},e}(Tn),An=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return wn(e,t),e.prototype.record=function(t,e,r){t<0?Xe.warn("negative value provided to histogram "+this._descriptor.name+": "+t):this._record(t,e,r)},e}(Tn),Rn=function(){function t(t,e,r){this._observableRegistry=r,this._descriptor=t,this._metricStorages=e}return t.prototype.addCallback=function(t){this._observableRegistry.addCallback(t,this)},t.prototype.removeCallback=function(t){this._observableRegistry.removeCallback(t,this)},t}(),Pn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return wn(e,t),e}(Rn),xn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return wn(e,t),e}(Rn),Mn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return wn(e,t),e}(Rn);function Ln(t){return t instanceof Rn}var Cn,Nn=function(){function t(t){this._meterSharedState=t}return t.prototype.createHistogram=function(t,e){var r=bn(t,_n.HISTOGRAM,e),n=this._meterSharedState.registerMetricStorage(r);return new An(n,r)},t.prototype.createCounter=function(t,e){var r=bn(t,_n.COUNTER,e),n=this._meterSharedState.registerMetricStorage(r);return new Sn(n,r)},t.prototype.createUpDownCounter=function(t,e){var r=bn(t,_n.UP_DOWN_COUNTER,e),n=this._meterSharedState.registerMetricStorage(r);return new On(n,r)},t.prototype.createObservableGauge=function(t,e){var r=bn(t,_n.OBSERVABLE_GAUGE,e),n=this._meterSharedState.registerAsyncMetricStorage(r);return new xn(r,n,this._meterSharedState.observableRegistry)},t.prototype.createObservableCounter=function(t,e){var r=bn(t,_n.OBSERVABLE_COUNTER,e),n=this._meterSharedState.registerAsyncMetricStorage(r);return new Pn(r,n,this._meterSharedState.observableRegistry)},t.prototype.createObservableUpDownCounter=function(t,e){var r=bn(t,_n.OBSERVABLE_UP_DOWN_COUNTER,e),n=this._meterSharedState.registerAsyncMetricStorage(r);return new Mn(r,n,this._meterSharedState.observableRegistry)},t.prototype.addBatchObservableCallback=function(t,e){this._meterSharedState.observableRegistry.addBatchCallback(t,e)},t.prototype.removeBatchObservableCallback=function(t,e){this._meterSharedState.observableRegistry.removeBatchCallback(t,e)},t}(),In=/[\^$\\.+?()[\]{}|]/g,Un=function(){function t(e){"*"===e?(this._matchAll=!0,this._regexp=/.*/):(this._matchAll=!1,this._regexp=new RegExp(t.escapePattern(e)))}return t.prototype.match=function(t){return!!this._matchAll||this._regexp.test(t)},t.escapePattern=function(t){return"^"+t.replace(In,"\\$&").replace("*",".*")+"$"},t.hasWildcard=function(t){return t.includes("*")},t}(),kn=function(){function t(t){this._matchAll=void 0===t,this._pattern=t}return t.prototype.match=function(t){return!!this._matchAll||t===this._pattern},t}(),Dn=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),jn=function(){function t(){}return t.Noop=function(){return Fn},t}(),Bn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Dn(e,t),e.prototype.process=function(t,e){return t},e}(jn),Vn=function(t){function e(e){var r=t.call(this)||this;return r._allowedAttributeNames=e,r}return Dn(e,t),e.prototype.process=function(t,e){var r=this,n={};return Object.keys(t).filter((function(t){return r._allowedAttributeNames.includes(t)})).forEach((function(e){return n[e]=t[e]})),n},e}(jn),Fn=new Bn,Gn=function(){function t(t){var e;this._nameFilter=new Un(null!==(e=null==t?void 0:t.name)&&void 0!==e?e:"*"),this._type=null==t?void 0:t.type}return t.prototype.getType=function(){return this._type},t.prototype.getNameFilter=function(){return this._nameFilter},t}(),Hn=function(){function t(t){this._nameFilter=new kn(null==t?void 0:t.name),this._versionFilter=new kn(null==t?void 0:t.version),this._schemaUrlFilter=new kn(null==t?void 0:t.schemaUrl)}return t.prototype.getNameFilter=function(){return this._nameFilter},t.prototype.getVersionFilter=function(){return this._versionFilter},t.prototype.getSchemaUrlFilter=function(){return this._schemaUrlFilter},t}();!function(t){t[t.DROP=0]="DROP",t[t.SUM=1]="SUM",t[t.LAST_VALUE=2]="LAST_VALUE",t[t.HISTOGRAM=3]="HISTOGRAM"}(Cn||(Cn={}));var Xn=function(){function t(){this.kind=Cn.DROP}return t.prototype.createAccumulation=function(){},t.prototype.merge=function(t,e){},t.prototype.diff=function(t,e){},t.prototype.toMetricData=function(t,e,r,n){},t}(),zn=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a};var $n=function(){function t(t,e,r,n){var o,i;void 0===r&&(r=!0),void 0===n&&((i=(o=e).map((function(){return 0}))).push(0),n={buckets:{boundaries:o,counts:i},sum:0,count:0,hasMinMax:!1,min:1/0,max:-1/0}),this.startTime=t,this._boundaries=e,this._recordMinMax=r,this._current=n}return t.prototype.record=function(t){this._current.count+=1,this._current.sum+=t,this._recordMinMax&&(this._current.min=Math.min(t,this._current.min),this._current.max=Math.max(t,this._current.max),this._current.hasMinMax=!0);for(var e=0;e<this._boundaries.length;e++)if(t<this._boundaries[e])return void(this._current.buckets.counts[e]+=1);this._current.buckets.counts[this._boundaries.length]+=1},t.prototype.setStartTime=function(t){this.startTime=t},t.prototype.toPointValue=function(){return this._current},t}(),Wn=function(){function t(t,e){this._boundaries=t,this._recordMinMax=e,this.kind=Cn.HISTOGRAM}return t.prototype.createAccumulation=function(t){return new $n(t,this._boundaries,this._recordMinMax)},t.prototype.merge=function(t,e){for(var r=t.toPointValue(),n=e.toPointValue(),o=r.buckets.counts,i=n.buckets.counts,a=new Array(o.length),s=0;s<o.length;s++)a[s]=o[s]+i[s];var u=1/0,c=-1/0;return this._recordMinMax&&(r.hasMinMax&&n.hasMinMax?(u=Math.min(r.min,n.min),c=Math.max(r.max,n.max)):r.hasMinMax?(u=r.min,c=r.max):n.hasMinMax&&(u=n.min,c=n.max)),new $n(t.startTime,r.buckets.boundaries,this._recordMinMax,{buckets:{boundaries:r.buckets.boundaries,counts:a},count:r.count+n.count,sum:r.sum+n.sum,hasMinMax:this._recordMinMax&&(r.hasMinMax||n.hasMinMax),min:u,max:c})},t.prototype.diff=function(t,e){for(var r=t.toPointValue(),n=e.toPointValue(),o=r.buckets.counts,i=n.buckets.counts,a=new Array(o.length),s=0;s<o.length;s++)a[s]=i[s]-o[s];return new $n(e.startTime,r.buckets.boundaries,this._recordMinMax,{buckets:{boundaries:r.buckets.boundaries,counts:a},count:n.count-r.count,sum:n.sum-r.sum,hasMinMax:!1,min:1/0,max:-1/0})},t.prototype.toMetricData=function(t,e,r,n){return{descriptor:t,aggregationTemporality:e,dataPointType:wr.HISTOGRAM,dataPoints:r.map((function(e){var r=zn(e,2),o=r[0],i=r[1],a=i.toPointValue(),s=t.type===_n.UP_DOWN_COUNTER||t.type===_n.OBSERVABLE_GAUGE||t.type===_n.OBSERVABLE_UP_DOWN_COUNTER;return{attributes:o,startTime:i.startTime,endTime:n,value:{min:a.hasMinMax?a.min:void 0,max:a.hasMinMax?a.max:void 0,sum:s?void 0:a.sum,buckets:a.buckets,count:a.count}}}))}},t}(),Kn=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},qn=function(){function t(t,e,r){void 0===e&&(e=0),void 0===r&&(r=[0,0]),this.startTime=t,this._current=e,this.sampleTime=r}return t.prototype.record=function(t){this._current=t,this.sampleTime=dr()},t.prototype.setStartTime=function(t){this.startTime=t},t.prototype.toPointValue=function(){return this._current},t}(),Jn=function(){function t(){this.kind=Cn.LAST_VALUE}return t.prototype.createAccumulation=function(t){return new qn(t)},t.prototype.merge=function(t,e){var r=vr(e.sampleTime)>=vr(t.sampleTime)?e:t;return new qn(t.startTime,r.toPointValue(),r.sampleTime)},t.prototype.diff=function(t,e){var r=vr(e.sampleTime)>=vr(t.sampleTime)?e:t;return new qn(e.startTime,r.toPointValue(),r.sampleTime)},t.prototype.toMetricData=function(t,e,r,n){return{descriptor:t,aggregationTemporality:e,dataPointType:wr.GAUGE,dataPoints:r.map((function(t){var e=Kn(t,2),r=e[0],o=e[1];return{attributes:r,startTime:o.startTime,endTime:n,value:o.toPointValue()}}))}},t}(),Zn=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},Yn=function(){function t(t,e,r,n){void 0===r&&(r=0),void 0===n&&(n=!1),this.startTime=t,this.monotonic=e,this._current=r,this.reset=n}return t.prototype.record=function(t){this.monotonic&&t<0||(this._current+=t)},t.prototype.setStartTime=function(t){this.startTime=t},t.prototype.toPointValue=function(){return this._current},t}(),Qn=function(){function t(t){this.monotonic=t,this.kind=Cn.SUM}return t.prototype.createAccumulation=function(t){return new Yn(t,this.monotonic)},t.prototype.merge=function(t,e){var r=t.toPointValue(),n=e.toPointValue();return e.reset?new Yn(e.startTime,this.monotonic,n,e.reset):new Yn(t.startTime,this.monotonic,r+n)},t.prototype.diff=function(t,e){var r=t.toPointValue(),n=e.toPointValue();return this.monotonic&&r>n?new Yn(e.startTime,this.monotonic,n,!0):new Yn(e.startTime,this.monotonic,n-r)},t.prototype.toMetricData=function(t,e,r,n){return{descriptor:t,aggregationTemporality:e,dataPointType:wr.SUM,dataPoints:r.map((function(t){var e=Zn(t,2),r=e[0],o=e[1];return{attributes:r,startTime:o.startTime,endTime:n,value:o.toPointValue()}})),isMonotonic:this.monotonic}},t}(),to=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),eo=function(){function t(){}return t.Drop=function(){return so},t.Sum=function(){return uo},t.LastValue=function(){return co},t.Histogram=function(){return lo},t.Default=function(){return fo},t}(),ro=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return to(e,t),e.prototype.createAggregator=function(t){return e.DEFAULT_INSTANCE},e.DEFAULT_INSTANCE=new Xn,e}(eo),no=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return to(e,t),e.prototype.createAggregator=function(t){switch(t.type){case _n.COUNTER:case _n.OBSERVABLE_COUNTER:case _n.HISTOGRAM:return e.MONOTONIC_INSTANCE;default:return e.NON_MONOTONIC_INSTANCE}},e.MONOTONIC_INSTANCE=new Qn(!0),e.NON_MONOTONIC_INSTANCE=new Qn(!1),e}(eo),oo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return to(e,t),e.prototype.createAggregator=function(t){return e.DEFAULT_INSTANCE},e.DEFAULT_INSTANCE=new Jn,e}(eo),io=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return to(e,t),e.prototype.createAggregator=function(t){return e.DEFAULT_INSTANCE},e.DEFAULT_INSTANCE=new Wn([0,5,10,25,50,75,100,250,500,1e3],!0),e}(eo);!function(t){function e(e,r){void 0===r&&(r=!0);var n=t.call(this)||this;if(n._recordMinMax=r,void 0===e||0===e.length)throw new Error("HistogramAggregator should be created with boundaries.");var o=(e=(e=e.concat()).sort((function(t,e){return t-e}))).lastIndexOf(-1/0),i=e.indexOf(1/0);return-1===i&&(i=void 0),n._boundaries=e.slice(o+1,i),n}to(e,t),e.prototype.createAggregator=function(t){return new Wn(this._boundaries,this._recordMinMax)}}(eo);var ao=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return to(e,t),e.prototype._resolve=function(t){switch(t.type){case _n.COUNTER:case _n.UP_DOWN_COUNTER:case _n.OBSERVABLE_COUNTER:case _n.OBSERVABLE_UP_DOWN_COUNTER:return uo;case _n.OBSERVABLE_GAUGE:return co;case _n.HISTOGRAM:return lo}return Xe.warn("Unable to recognize instrument type: "+t.type),so},e.prototype.createAggregator=function(t){return this._resolve(t).createAggregator(t)},e}(eo),so=new ro,uo=new no,co=new oo,lo=new io,fo=new ao;var po=function(t){var e,r;if(null==(r=t).instrumentName&&null==r.instrumentType&&null==r.meterName&&null==r.meterVersion&&null==r.meterSchemaUrl)throw new Error("Cannot create view with no selector arguments supplied");if(null!=t.name&&(null==(null==t?void 0:t.instrumentName)||Un.hasWildcard(t.instrumentName)))throw new Error("Views with a specified name must be declared with an instrument selector that selects at most one instrument per meter.");null!=t.attributeKeys?this.attributesProcessor=new Vn(t.attributeKeys):this.attributesProcessor=jn.Noop(),this.name=t.name,this.description=t.description,this.aggregation=null!==(e=t.aggregation)&&void 0!==e?e:eo.Default(),this.instrumentSelector=new Gn({name:t.instrumentName,type:t.instrumentType}),this.meterSelector=new Hn({name:t.meterName,version:t.meterVersion,schemaUrl:t.meterSchemaUrl})},ho=function(){function t(){this._registeredViews=[]}return t.prototype.addView=function(t){this._registeredViews.push(t)},t.prototype.findViews=function(e,r){var n=this,o=this._registeredViews.filter((function(t){return n._matchInstrument(t.instrumentSelector,e)&&n._matchMeter(t.meterSelector,r)}));return 0===o.length?[t.DEFAULT_VIEW]:o},t.prototype._matchInstrument=function(t,e){return(void 0===t.getType()||e.type===t.getType())&&t.getNameFilter().match(e.name)},t.prototype._matchMeter=function(t,e){return t.getNameFilter().match(e.name)&&(void 0===e.version||t.getVersionFilter().match(e.version))&&(void 0===e.schemaUrl||t.getSchemaUrlFilter().match(e.schemaUrl))},t.DEFAULT_VIEW=new po({instrumentName:"*"}),t}(),yo=function(){function t(t){this._instrumentDescriptor=t}return t.prototype.getInstrumentDescriptor=function(){return this._instrumentDescriptor},t.prototype.updateDescription=function(t){this._instrumentDescriptor=bn(this._instrumentDescriptor.name,this._instrumentDescriptor.type,{description:t,valueType:this._instrumentDescriptor.valueType,unit:this._instrumentDescriptor.unit})},t}(),vo=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),mo=function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},_o=function(){function t(t){this._hash=t,this._valueMap=new Map,this._keyMap=new Map}return t.prototype.get=function(t,e){return null!=e||(e=this._hash(t)),this._valueMap.get(e)},t.prototype.getOrDefault=function(t,e){var r=this._hash(t);if(this._valueMap.has(r))return this._valueMap.get(r);var n=e();return this._keyMap.has(r)||this._keyMap.set(r,t),this._valueMap.set(r,n),n},t.prototype.set=function(t,e,r){null!=r||(r=this._hash(t)),this._keyMap.has(r)||this._keyMap.set(r,t),this._valueMap.set(r,e)},t.prototype.has=function(t,e){return null!=e||(e=this._hash(t)),this._valueMap.has(e)},t.prototype.keys=function(){var t,e;return mo(this,(function(r){switch(r.label){case 0:t=this._keyMap.entries(),e=t.next(),r.label=1;case 1:return!0===e.done?[3,3]:[4,[e.value[1],e.value[0]]];case 2:return r.sent(),e=t.next(),[3,1];case 3:return[2]}}))},t.prototype.entries=function(){var t,e;return mo(this,(function(r){switch(r.label){case 0:t=this._valueMap.entries(),e=t.next(),r.label=1;case 1:return!0===e.done?[3,3]:[4,[this._keyMap.get(e.value[0]),e.value[1],e.value[0]]];case 2:return r.sent(),e=t.next(),[3,1];case 3:return[2]}}))},Object.defineProperty(t.prototype,"size",{get:function(){return this._valueMap.size},enumerable:!1,configurable:!0}),t}(),go=function(t){function e(){return t.call(this,Cr)||this}return vo(e,t),e}(_o),bo=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},Eo=function(){function t(t){this._aggregator=t,this._activeCollectionStorage=new go,this._cumulativeMemoStorage=new go}return t.prototype.record=function(t,e,r,n){var o=this,i=this._activeCollectionStorage.getOrDefault(e,(function(){return o._aggregator.createAccumulation(n)}));null==i||i.record(t)},t.prototype.batchCumulate=function(t,e){var r=this;Array.from(t.entries()).forEach((function(t){var n=bo(t,3),o=n[0],i=n[1],a=n[2],s=r._aggregator.createAccumulation(e);null==s||s.record(i);var u=s;if(r._cumulativeMemoStorage.has(o,a)){var c=r._cumulativeMemoStorage.get(o,a);u=r._aggregator.diff(c,s)}r._cumulativeMemoStorage.set(o,s,a),r._activeCollectionStorage.set(o,u,a)}))},t.prototype.collect=function(){var t=this._activeCollectionStorage;return this._activeCollectionStorage=new go,t},t}(),wo=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},To=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},Oo=function(){function t(t){this._aggregator=t,this._unreportedAccumulations=new Map,this._reportHistory=new Map}return t.prototype.buildMetrics=function(e,r,n,o,i){this._stashAccumulations(r,o);var a,s,u=this._getMergedUnreportedAccumulations(e),c=u;if(this._reportHistory.has(e)){var l=this._reportHistory.get(e),f=l.collectionTime;c=(a=l.aggregationTemporality)===Er.CUMULATIVE?t.merge(l.accumulations,u,this._aggregator):t.calibrateStartTime(l.accumulations,u,f)}else a=e.selectAggregationTemporality(n.type);return this._reportHistory.set(e,{accumulations:c,collectionTime:i,aggregationTemporality:a}),this._aggregator.toMetricData(n,a,(s=c,Array.from(s.entries())),i)},t.prototype._stashAccumulations=function(t,e){var r=this;t.forEach((function(t){var n=r._unreportedAccumulations.get(t);void 0===n&&(n=[],r._unreportedAccumulations.set(t,n)),n.push(e)}))},t.prototype._getMergedUnreportedAccumulations=function(e){var r,n,o=new go,i=this._unreportedAccumulations.get(e);if(this._unreportedAccumulations.set(e,[]),void 0===i)return o;try{for(var a=wo(i),s=a.next();!s.done;s=a.next()){var u=s.value;o=t.merge(o,u,this._aggregator)}}catch(t){r={error:t}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return o},t.merge=function(t,e,r){for(var n=t,o=e.entries(),i=o.next();!0!==i.done;){var a=To(i.value,3),s=a[0],u=a[1],c=a[2];if(t.has(s,c)){var l=t.get(s,c),f=r.merge(l,u);n.set(s,f,c)}else n.set(s,u,c);i=o.next()}return n},t.calibrateStartTime=function(t,e,r){var n,o;try{for(var i=wo(t.keys()),a=i.next();!a.done;a=i.next()){var s=To(a.value,2),u=s[0],c=s[1],l=e.get(u,c);null==l||l.setStartTime(r)}}catch(t){n={error:t}}finally{try{a&&!a.done&&(o=i.return)&&o.call(i)}finally{if(n)throw n.error}}return e},t}();var So=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ao=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},Ro=function(t){function e(e,r,n){var o=t.call(this,e)||this;return o._attributesProcessor=n,o._deltaMetricStorage=new Eo(r),o._temporalMetricStorage=new Oo(r),o}return So(e,t),e.prototype.record=function(t,e){var r=this,n=new go;Array.from(t.entries()).forEach((function(t){var e=Ao(t,2),o=e[0],i=e[1];n.set(r._attributesProcessor.process(o),i)})),this._deltaMetricStorage.batchCumulate(n,e)},e.prototype.collect=function(t,e,r){var n=this._deltaMetricStorage.collect();return this._temporalMetricStorage.buildMetrics(t,e,this._instrumentDescriptor,n,r)},e}(yo);function Po(t,e){var r="";return t.unit!==e.unit&&(r+="\t- Unit '"+t.unit+"' does not match '"+e.unit+"'\n"),t.type!==e.type&&(r+="\t- Type '"+t.type+"' does not match '"+e.type+"'\n"),t.valueType!==e.valueType&&(r+="\t- Value Type '"+t.valueType+"' does not match '"+e.valueType+"'\n"),t.description!==e.description&&(r+="\t- Description '"+t.description+"' does not match '"+e.description+"'\n"),r}function xo(t,e){return t.valueType!==e.valueType?function(t,e){return"\t- use valueType '"+t.valueType+"' on instrument creation or use an instrument name other than '"+e.name+"'"}(t,e):t.unit!==e.unit?function(t,e){return"\t- use unit '"+t.unit+"' on instrument creation or use an instrument name other than '"+e.name+"'"}(t,e):t.type!==e.type?function(t,e){var r={name:e.name,type:e.type},n=JSON.stringify(r);return"\t- create a new view with a name other than '"+t.name+"' and InstrumentSelector '"+n+"'"}(t,e):t.description!==e.description?function(t,e){var r={name:e.name,type:e.type},n=JSON.stringify(r);return"\t- create a new view with a name other than '"+t.name+"' and InstrumentSelector '"+n+"'\n    \t- OR - create a new view with the name "+t.name+" and description '"+t.description+"' and InstrumentSelector "+n+"\n    \t- OR - create a new view with the name "+e.name+" and description '"+t.description+"' and InstrumentSelector "+n}(t,e):""}var Mo=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Lo=function(){function t(){this._metricStorageRegistry=new Map}return t.create=function(){return new t},t.prototype.getStorages=function(){var t,e,r=[];try{for(var n=Mo(this._metricStorageRegistry.values()),o=n.next();!o.done;o=n.next()){var i=o.value;r=r.concat(i)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}return r},t.prototype.register=function(t){var e,r,n=t.getInstrumentDescriptor(),o=this._metricStorageRegistry.get(n.name);if(void 0===o)return this._metricStorageRegistry.set(n.name,[t]),t;var i,a,s=null;try{for(var u=Mo(o),c=u.next();!c.done;c=u.next()){var l=c.value,f=l.getInstrumentDescriptor();a=n,(i=f).name===a.name&&i.unit===a.unit&&i.type===a.type&&i.valueType===a.valueType?(f.description!==n.description&&(n.description.length>f.description.length&&l.updateDescription(n.description),Xe.warn("A view or instrument with the name ",n.name," has already been registered, but has a different description and is incompatible with another registered view.\n","Details:\n",Po(f,n),"The longer description will be used.\nTo resolve the conflict:",xo(f,n))),s=l):Xe.warn("A view or instrument with the name ",n.name," has already been registered and is incompatible with another registered view.\n","Details:\n",Po(f,n),"To resolve the conflict:\n",xo(f,n))}}catch(t){e={error:t}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(e)throw e.error}}return null!=s?s:(o.push(t),t)},t}(),Co=function(){function t(t){this._backingStorages=t}return t.prototype.record=function(t,e,r,n){this._backingStorages.forEach((function(o){o.record(t,e,r,n)}))},t}(),No=function(){function t(t){this._descriptor=t,this._buffer=new go}return t.prototype.observe=function(t,e){void 0===e&&(e={}),this._descriptor.valueType!==jr.INT||Number.isInteger(t)||(Xe.warn("INT value type cannot accept a floating-point value for "+this._descriptor.name+", ignoring the fractional digits."),t=Math.trunc(t)),this._buffer.set(e,t)},t}(),Io=function(){function t(){this._buffer=new Map}return t.prototype.observe=function(t,e,r){if(void 0===r&&(r={}),Ln(t)){var n=this._buffer.get(t);null==n&&(n=new go,this._buffer.set(t,n)),t._descriptor.valueType!==jr.INT||Number.isInteger(e)||(Xe.warn("INT value type cannot accept a floating-point value for "+t._descriptor.name+", ignoring the fractional digits."),e=Math.trunc(e)),n.set(r,e)}},t}(),Uo=function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((n=n.apply(t,e||[])).next())}))},ko=function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Do=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},jo=function(t,e,r){if(r||2===arguments.length)for(var n,o=0,i=e.length;o<i;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))},Bo=function(){function t(){this._callbacks=[],this._batchCallbacks=[]}return t.prototype.addCallback=function(t,e){this._findCallback(t,e)>=0||this._callbacks.push({callback:t,instrument:e})},t.prototype.removeCallback=function(t,e){var r=this._findCallback(t,e);r<0||this._callbacks.splice(r,1)},t.prototype.addBatchCallback=function(t,e){var r=new Set(e.filter(Ln));0!==r.size?this._findBatchCallback(t,r)>=0||this._batchCallbacks.push({callback:t,instruments:r}):Xe.error("BatchObservableCallback is not associated with valid instruments",e)},t.prototype.removeBatchCallback=function(t,e){var r=new Set(e.filter(Ln)),n=this._findBatchCallback(t,r);n<0||this._batchCallbacks.splice(n,1)},t.prototype.observe=function(t,e){return Uo(this,void 0,void 0,(function(){var r,n,o;return ko(this,(function(i){switch(i.label){case 0:return r=this._observeCallbacks(t,e),n=this._observeBatchCallbacks(t,e),[4,Ur(jo(jo([],Do(r),!1),Do(n),!1))];case 1:return o=i.sent(),[2,o.filter(kr).map((function(t){return t.reason}))]}}))}))},t.prototype._observeCallbacks=function(t,e){var r=this;return this._callbacks.map((function(n){var o=n.callback,i=n.instrument;return Uo(r,void 0,void 0,(function(){var r,n;return ko(this,(function(a){switch(a.label){case 0:return r=new No(i._descriptor),n=Promise.resolve(o(r)),null!=e&&(n=Ir(n,e)),[4,n];case 1:return a.sent(),i._metricStorages.forEach((function(e){e.record(r._buffer,t)})),[2]}}))}))}))},t.prototype._observeBatchCallbacks=function(t,e){var r=this;return this._batchCallbacks.map((function(n){var o=n.callback,i=n.instruments;return Uo(r,void 0,void 0,(function(){var r,n;return ko(this,(function(a){switch(a.label){case 0:return r=new Io,n=Promise.resolve(o(r)),null!=e&&(n=Ir(n,e)),[4,n];case 1:return a.sent(),i.forEach((function(e){var n=r._buffer.get(e);null!=n&&e._metricStorages.forEach((function(e){e.record(n,t)}))})),[2]}}))}))}))},t.prototype._findCallback=function(t,e){return this._callbacks.findIndex((function(r){return r.callback===t&&r.instrument===e}))},t.prototype._findBatchCallback=function(t,e){return this._batchCallbacks.findIndex((function(r){return r.callback===t&&function(t,e){var r,n;if(t.size!==e.size)return!1;try{for(var o=Mr(t),i=o.next();!i.done;i=o.next()){var a=i.value;if(!e.has(a))return!1}}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return!0}(r.instruments,e)}))},t}(),Vo=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Fo=function(t){function e(e,r,n){var o=t.call(this,e)||this;return o._attributesProcessor=n,o._deltaMetricStorage=new Eo(r),o._temporalMetricStorage=new Oo(r),o}return Vo(e,t),e.prototype.record=function(t,e,r,n){e=this._attributesProcessor.process(e,r),this._deltaMetricStorage.record(t,e,r,n)},e.prototype.collect=function(t,e,r){var n=this._deltaMetricStorage.collect();return this._temporalMetricStorage.buildMetrics(t,e,this._instrumentDescriptor,n,r)},e}(yo),Go=function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((n=n.apply(t,e||[])).next())}))},Ho=function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Xo=function(){function t(t,e){this._meterProviderSharedState=t,this._instrumentationScope=e,this._metricStorageRegistry=new Lo,this.observableRegistry=new Bo,this.meter=new Nn(this)}return t.prototype.registerMetricStorage=function(t){var e=this,r=this._meterProviderSharedState.viewRegistry.findViews(t,this._instrumentationScope).map((function(r){var n=En(r,t),o=r.aggregation.createAggregator(n),i=new Fo(n,o,r.attributesProcessor);return e._metricStorageRegistry.register(i)})).filter(Lr);return 1===r.length?r[0]:new Co(r)},t.prototype.registerAsyncMetricStorage=function(t){var e=this;return this._meterProviderSharedState.viewRegistry.findViews(t,this._instrumentationScope).map((function(r){var n=En(r,t),o=r.aggregation.createAggregator(n),i=new Ro(n,o,r.attributesProcessor);return e._metricStorageRegistry.register(i)})).filter(Lr)},t.prototype.collect=function(t,e,r){return Go(this,void 0,void 0,(function(){var n,o,i=this;return Ho(this,(function(a){switch(a.label){case 0:return[4,this.observableRegistry.observe(e,null==r?void 0:r.timeoutMillis)];case 1:return n=a.sent(),o=Array.from(this._metricStorageRegistry.getStorages()).map((function(r){return r.collect(t,i._meterProviderSharedState.metricCollectors,e)})).filter(Lr),[2,{scopeMetrics:{scope:this._instrumentationScope,metrics:o.filter(Lr)},errors:n}]}}))}))},t}(),zo=function(){function t(t){this.resource=t,this.viewRegistry=new ho,this.metricCollectors=[],this.meterSharedStates=new Map}return t.prototype.getMeterSharedState=function(t){var e=function(t){var e,r;return t.name+":"+(null!==(e=t.version)&&void 0!==e?e:"")+":"+(null!==(r=t.schemaUrl)&&void 0!==r?r:"")}(t),r=this.meterSharedStates.get(e);return null==r&&(r=new Xo(this,t),this.meterSharedStates.set(e,r)),r},t}(),$o=function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((n=n.apply(t,e||[])).next())}))},Wo=function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Ko=function(){function t(t,e){this._sharedState=t,this._metricReader=e}return t.prototype.collect=function(t){return $o(this,void 0,void 0,(function(){var e,r,n,o=this;return Wo(this,(function(i){switch(i.label){case 0:return e=dr(),r=Array.from(this._sharedState.meterSharedStates.values()).map((function(r){return r.collect(o,e,t)})),[4,Promise.all(r)];case 1:return n=i.sent(),[2,{resourceMetrics:{resource:this._sharedState.resource,scopeMetrics:n.map((function(t){return t.scopeMetrics}))},errors:Dr(n,(function(t){return t.errors}))}]}}))}))},t.prototype.forceFlush=function(t){return $o(this,void 0,void 0,(function(){return Wo(this,(function(e){switch(e.label){case 0:return[4,this._metricReader.forceFlush(t)];case 1:return e.sent(),[2]}}))}))},t.prototype.shutdown=function(t){return $o(this,void 0,void 0,(function(){return Wo(this,(function(e){switch(e.label){case 0:return[4,this._metricReader.shutdown(t)];case 1:return e.sent(),[2]}}))}))},t.prototype.selectAggregationTemporality=function(t){return this._metricReader.selectAggregationTemporality(t)},t}(),qo=function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((n=n.apply(t,e||[])).next())}))},Jo=function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Zo=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Yo=function(){function t(t){var e,r,n;if(this._shutdown=!1,this._sharedState=new zo(null!==(n=null==t?void 0:t.resource)&&void 0!==n?n:Tr.empty()),null!=(null==t?void 0:t.views)&&t.views.length>0)try{for(var o=Zo(t.views),i=o.next();!i.done;i=o.next()){var a=i.value;this._sharedState.viewRegistry.addView(a)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}}return t.prototype.getMeter=function(t,e,r){return void 0===e&&(e=""),void 0===r&&(r={}),this._shutdown?(Xe.warn("A shutdown MeterProvider cannot provide a Meter"),sn):this._sharedState.getMeterSharedState({name:t,version:e,schemaUrl:r.schemaUrl}).meter},t.prototype.addMetricReader=function(t){var e=new Ko(this._sharedState,t);t.setMetricProducer(e),this._sharedState.metricCollectors.push(e)},t.prototype.shutdown=function(t){return qo(this,void 0,void 0,(function(){return Jo(this,(function(e){switch(e.label){case 0:return this._shutdown?(Xe.warn("shutdown may only be called once per MeterProvider"),[2]):(this._shutdown=!0,[4,Promise.all(this._sharedState.metricCollectors.map((function(e){return e.shutdown(t)})))]);case 1:return e.sent(),[2]}}))}))},t.prototype.forceFlush=function(t){return qo(this,void 0,void 0,(function(){return Jo(this,(function(e){switch(e.label){case 0:return this._shutdown?(Xe.warn("invalid attempt to force flush after MeterProvider shutdown"),[2]):[4,Promise.all(this._sharedState.metricCollectors.map((function(e){return e.forceFlush(t)})))];case 1:return e.sent(),[2]}}))}))},t}();const Qo={create({readerOptions:{exporter:t,exportIntervalMillis:e=6e4,exportTimeoutMillis:r=3e4},service:n}){const o=new Yo({resource:Tr.default().merge(new Tr({[Pt]:n.name,[xt]:n.version}))});o.addMetricReader(new Wr({exporter:t,exportIntervalMillis:e,exportTimeoutMillis:r}));const i=new qr;return o.addMetricReader(new Wr({exporter:i,exportIntervalMillis:e,exportTimeoutMillis:r})),o}},ti={create({mode:t="production",...e}){if("production"!==t)return n({...e.pino,browser:{write(t){var r,n,o;const i=(null===(r=e.pino)||void 0===r||null===(n=r.formatters)||void 0===n||null===(o=n.log)||void 0===o?void 0:o.call(n,t))??t;O(i)}}});const r=e.splunk&&mt.create({collector:At.create(e.splunk)}),o=e.openSearch&&mt.create({collector:Ot.create(e.openSearch)}),i=n({...e.pino,browser:{write(t){var n,i,a;const s=(null===(n=e.pino)||void 0===n||null===(i=n.formatters)||void 0===i||null===(a=i.log)||void 0===a?void 0:a.call(i,t))??t;O(s),null==r||r.send(s),null==o||o.send(s)}}});return window.addEventListener&&(r&&(window.addEventListener("offline",r.pause),window.addEventListener("online",r.resume)),o&&(window.addEventListener("offline",o.pause),window.addEventListener("online",o.resume))),i}};var ei={temporalityPreference:Er.CUMULATIVE},ri=function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((n=n.apply(t,e||[])).next())}))},ni=function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},oi=function(){return Er.CUMULATIVE},ii=function(t){switch(t){case _n.COUNTER:case _n.OBSERVABLE_COUNTER:case _n.HISTOGRAM:case _n.OBSERVABLE_GAUGE:return Er.DELTA;case _n.UP_DOWN_COUNTER:case _n.OBSERVABLE_UP_DOWN_COUNTER:return Er.CUMULATIVE}};var ai=function(){function t(t,e){void 0===e&&(e=ei),this._otlpExporter=t,this._aggregationTemporalitySelector=e.temporalityPreference===Er.DELTA?ii:oi}return t.prototype.export=function(t,e){this._otlpExporter.export([t],e)},t.prototype.shutdown=function(){return ri(this,void 0,void 0,(function(){return ni(this,(function(t){switch(t.label){case 0:return[4,this._otlpExporter.shutdown()];case 1:return t.sent(),[2]}}))}))},t.prototype.forceFlush=function(){return Promise.resolve()},t.prototype.selectAggregationTemporality=function(t){return this._aggregationTemporalitySelector(t)},t}(),si=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},ui=1e4;function ci(t){return"number"==typeof t?t<=0?li(t,1e4):t:function(){var t,e=Number(null!==(t=ar().OTEL_EXPORTER_OTLP_TRACES_TIMEOUT)&&void 0!==t?t:ar().OTEL_EXPORTER_OTLP_TIMEOUT);return e<=0?li(e,ui):e}()}function li(t,e){return Xe.warn("Timeout must be greater than 0",t),e}var fi=function(){function t(t){void 0===t&&(t={}),this._sendingPromises=[],this.url=this.getDefaultUrl(t),"string"==typeof t.hostname&&(this.hostname=t.hostname),this.shutdown=this.shutdown.bind(this),this._shutdownOnce=new br(this._shutdown,this),this._concurrencyLimit="number"==typeof t.concurrencyLimit?t.concurrencyLimit:1/0,this.timeoutMillis=ci(t.timeoutMillis),this.onInit(t)}return t.prototype.export=function(t,e){this._shutdownOnce.isCalled?e({code:lr.FAILED,error:new Error("Exporter has been shutdown")}):this._sendingPromises.length>=this._concurrencyLimit?e({code:lr.FAILED,error:new Error("Concurrent export limit reached")}):this._export(t).then((function(){e({code:lr.SUCCESS})})).catch((function(t){e({code:lr.FAILED,error:t})}))},t.prototype._export=function(t){var e=this;return new Promise((function(r,n){try{Xe.debug("items to be sent",t),e.send(t,r,n)}catch(t){n(t)}}))},t.prototype.shutdown=function(){return this._shutdownOnce.call()},t.prototype._shutdown=function(){return Xe.debug("shutdown started"),this.onShutdown(),Promise.all(this._sendingPromises).then((function(){}))},t}(),pi=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),hi=function(t){function e(e,r,n){var o=t.call(this,e)||this;return o.name="OTLPExporterError",o.data=n,o.code=r,o}return pi(e,t),e}(Error),di=function(){return di=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},di.apply(this,arguments)},yi=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a};var vi,mi=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),_i=function(t){function e(e){void 0===e&&(e={});var r=t.call(this,e)||this;return r._useXHR=!1,r._useXHR=!!e.headers||"function"!=typeof navigator.sendBeacon,r._useXHR?r._headers=Object.assign({},function(t){void 0===t&&(t={});var e={};return Object.entries(t).forEach((function(t){var r=si(t,2),n=r[0],o=r[1];void 0!==o?e[n]=String(o):Xe.warn('Header "'+n+'" has wrong value and will be ignored')})),e}(e.headers),$e(ar().OTEL_EXPORTER_OTLP_HEADERS)):r._headers={},r}return mi(e,t),e.prototype.onInit=function(){window.addEventListener("unload",this.shutdown)},e.prototype.onShutdown=function(){window.removeEventListener("unload",this.shutdown)},e.prototype.send=function(t,e,r){var n=this;if(this._shutdownOnce.isCalled)Xe.debug("Shutdown already started. Cannot send objects");else{var o=this.convert(t),i=JSON.stringify(o),a=new Promise((function(t,e){n._useXHR?function(t,e,r,n,o,i){var a,s=setTimeout((function(){a=!0,u.abort()}),n),u=new XMLHttpRequest;u.open("POST",e),Object.entries(di(di({},{Accept:"application/json","Content-Type":"application/json"}),r)).forEach((function(t){var e=yi(t,2),r=e[0],n=e[1];u.setRequestHeader(r,n)})),u.send(t),u.onreadystatechange=function(){if(u.readyState===XMLHttpRequest.DONE)if(u.status>=200&&u.status<=299)clearTimeout(s),Xe.debug("xhr success",t),o();else if(a){var e=new hi("Request Timeout",u.status);i(e)}else e=new hi("Failed to export with XHR (status: "+u.status+")",u.status),clearTimeout(s),i(e)}}(i,n.url,n._headers,n.timeoutMillis,t,e):function(t,e,r,n,o){navigator.sendBeacon(e,new Blob([t],r))?(Xe.debug("sendBeacon - can send",t),n()):o(new hi("sendBeacon - cannot send "+t))}(i,n.url,{type:"application/json"},t,e)})).then(e,r);this._sendingPromises.push(a);var s=function(){var t=n._sendingPromises.indexOf(a);n._sendingPromises.splice(t,1)};a.then(s,s)}},e}(fi);!function(t){t[t.SPAN_KIND_UNSPECIFIED=0]="SPAN_KIND_UNSPECIFIED",t[t.SPAN_KIND_INTERNAL=1]="SPAN_KIND_INTERNAL",t[t.SPAN_KIND_SERVER=2]="SPAN_KIND_SERVER",t[t.SPAN_KIND_CLIENT=3]="SPAN_KIND_CLIENT",t[t.SPAN_KIND_PRODUCER=4]="SPAN_KIND_PRODUCER",t[t.SPAN_KIND_CONSUMER=5]="SPAN_KIND_CONSUMER"}(vi||(vi={}));var gi=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a};function bi(t){return Object.keys(t).map((function(e){return Ei(e,t[e])}))}function Ei(t,e){return{key:t,value:wi(e)}}function wi(t){var e=typeof t;return"string"===e?{stringValue:t}:"number"===e?Number.isInteger(t)?{intValue:t}:{doubleValue:t}:"boolean"===e?{boolValue:t}:t instanceof Uint8Array?{bytesValue:t}:Array.isArray(t)?{arrayValue:{values:t.map(wi)}}:"object"===e&&null!=t?{kvlistValue:{values:Object.entries(t).map((function(t){var e=gi(t,2);return Ei(e[0],e[1])}))}}:{}}function Ti(t){return{resource:{attributes:bi(t.resource.attributes),droppedAttributesCount:0},schemaUrl:void 0,scopeMetrics:(e=t.scopeMetrics,Array.from(e.map((function(t){var e={scope:{name:t.scope.name,version:t.scope.version},metrics:t.metrics.map((function(t){return function(t){var e={name:t.descriptor.name,description:t.descriptor.description,unit:t.descriptor.unit},r=function(t){if(t===Er.DELTA)return 1;if(t===Er.CUMULATIVE)return 2;return 0}(t.aggregationTemporality);t.dataPointType===wr.SUM?e.sum={aggregationTemporality:r,isMonotonic:t.isMonotonic,dataPoints:Oi(t)}:t.dataPointType===wr.GAUGE?e.gauge={dataPoints:Oi(t)}:t.dataPointType===wr.HISTOGRAM&&(e.histogram={aggregationTemporality:r,dataPoints:Si(t)});return e}(t)})),schemaUrl:t.scope.schemaUrl};return e}))))};var e}function Oi(t){return t.dataPoints.map((function(e){return function(t,e){var r={attributes:bi(t.attributes),startTimeUnixNano:yr(t.startTime),timeUnixNano:yr(t.endTime)};return e===jr.INT?r.asInt=t.value:e===jr.DOUBLE&&(r.asDouble=t.value),r}(e,t.descriptor.valueType)}))}function Si(t){return t.dataPoints.map((function(t){var e=t.value;return{attributes:bi(t.attributes),bucketCounts:e.buckets.counts,explicitBounds:e.buckets.boundaries,count:e.count,sum:e.sum,min:e.min,max:e.max,startTimeUnixNano:yr(t.startTime),timeUnixNano:yr(t.endTime)}}))}var Ai=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ri="v1/metrics",Pi=function(t){function e(e){void 0===e&&(e=ei);var r=t.call(this,e)||this;return r._headers=Object.assign(r._headers,$e(ar().OTEL_EXPORTER_OTLP_METRICS_HEADERS)),r}return Ai(e,t),e.prototype.getDefaultUrl=function(t){return"string"==typeof t.url?t.url:ar().OTEL_EXPORTER_OTLP_METRICS_ENDPOINT.length>0?(e=ar().OTEL_EXPORTER_OTLP_METRICS_ENDPOINT,r=Ri,e.includes(r)||e.endsWith("/")||(e+="/"),e):ar().OTEL_EXPORTER_OTLP_ENDPOINT.length>0?function(t,e){return t.endsWith("/")||(t+="/"),t+e}(ar().OTEL_EXPORTER_OTLP_ENDPOINT,Ri):"http://localhost:4318/v1/metrics";var e,r},e.prototype.convert=function(t){return{resourceMetrics:t.map((function(t){return Ti(t)}))}},e}(_i),xi=function(t){function e(e){return void 0===e&&(e=ei),t.call(this,new Pi(e),e)||this}return Ai(e,t),e}(ai),Mi="@vtex/diagnostics-web",Li="0.3.1";const Ci={create({readerOptions:{url:t,exportIntervalMillis:e,exportTimeoutMillis:r},service:n}){const o=new xi({url:t}),i=Qo.create({readerOptions:{exporter:o,exportIntervalMillis:e,exportTimeoutMillis:r},service:n});return"addEventListener"in window&&window.addEventListener("beforeunload",(()=>{i.forceFlush()})),i.getMeter(Mi,Li)}};t.Logger=ti,t.Metrics=Ci,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=vtex-diagnostics-web.umd.min.js.map
